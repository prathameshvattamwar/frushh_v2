<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FRUSHH - Premium Natural Shakes Experience | Order Fresh Healthy Beverages</title>
  <meta name="description" content="FRUSHH delivers premium natural shakes with advanced features: loyalty rewards, live tracking, personalized recommendations, and more. Join 10,000+ happy customers!"><!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&amp;family=Inter:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"><!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"><!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script><!-- SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #4B2E19;
            --primary-light: #6B4423;
            --secondary: #8B5A3C;
            --accent: #D4A574;
            --bg-main: #FBF6F1;
            --bg-card: #FFFFFF;
            --text-dark: #4B2E19;
            --text-light: #8B5A3C;
            --success: #27AE60;
            --error: #E74C3C;
            --warning: #F39C12;
            --info: #3498DB;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
            --shadow: 0 8px 32px rgba(75, 46, 25, 0.12);
            --shadow-hover: 0 12px 48px rgba(75, 46, 25, 0.18);
            --radius: 24px;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-main);
            color: var(--text-dark);
            overflow-x: hidden;
            position: relative;
            box-sizing: border-box;
            padding-bottom: 80px;
        }
        
        html {
            scroll-behavior: smooth;
            height: 100%;
        }
        
        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(212, 165, 116, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 90, 60, 0.06) 0%, transparent 50%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='35' font-size='28' opacity='0.025'%3Eüçå%3C/text%3E%3C/svg%3E");
            background-size: cover, cover, 120px 120px;
            animation: backgroundFloat 60s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes backgroundFloat {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, 20px); }
        }
        
        .content-wrapper {
            position: relative;
            z-index: 1;
        }
        
        /* Top Navbar */
        .top-navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            padding: 1rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 4px 24px rgba(75, 46, 25, 0.08);
            transition: var(--transition);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .logo-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            box-shadow: 0 4px 16px rgba(75, 46, 25, 0.2);
            overflow: hidden;
        }
        
        .logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .top-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .icon-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--bg-main);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .icon-btn:hover {
            transform: scale(1.1);
            background: var(--primary);
            color: white;
        }
        
        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #E74C3C, #C0392B);
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.4);
        }
        
        .badge.hidden {
            display: none;
        }
        
        /* Loyalty Points Display */
        .loyalty-points-display {
            background: linear-gradient(135deg, var(--gold), #FFA500);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
            animation: pulse 2s ease-in-out infinite;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            padding: 0.75rem 0;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 -4px 24px rgba(75, 46, 25, 0.12);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 1rem;
            border-radius: 16px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            background: none;
            color: var(--text-light);
            position: relative;
        }
        
        .nav-item i {
            font-size: 1.5rem;
            transition: var(--transition);
        }
        
        .nav-item span {
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .nav-item.active {
            color: var(--primary);
            background: linear-gradient(135deg, rgba(75, 46, 25, 0.08), rgba(75, 46, 25, 0.12));
        }
        
        .nav-item.active i {
            transform: scale(1.2);
        }
        
        /* Section Container */
        .section-container {
            padding: 5rem 5% 2rem;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .section-container.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hero Section */
        .hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 2rem 1rem 2rem;
            background: linear-gradient(180deg, rgba(251, 246, 241, 0.5) 0%, rgba(251, 246, 241, 1) 100%);
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
        }
        
        .hero-badge {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: white;
            padding: 0.65rem 2rem;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 2rem;
            box-shadow: 0 6px 24px rgba(255, 215, 0, 0.4);
            animation: float 3s ease-in-out infinite;
            border: 3px solid white;
            letter-spacing: 0.5px;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .hero-logo {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow-hover);
            position: relative;
            overflow: hidden;
        }
        
        .hero-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .hero-logo::before {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), transparent);
            opacity: 0.3;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.3; }
            50% { transform: scale(1.1); opacity: 0.1; }
        }
        
        .hero h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.75rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
            line-height: 1.1;
        }
        
        .hero-tagline {
            font-size: 1rem;
            color: var(--secondary);
            margin-bottom: 0.75rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
            flex-wrap: wrap;
            padding: 0 1rem;
        }
        
        .hero-tagline span {
            display: inline-flex;
            align-items: center;
            background: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            box-shadow: 0 2px 12px rgba(75, 46, 25, 0.08);
        }
        
        .hero-tagline i {
            font-size: 1rem;
            color: var(--accent);
        }
        
        .hero-subtitle {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            max-width: 550px;
            line-height: 1.6;
        }
        
        .hero-cta {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 1rem 2.5rem;
            border-radius: 50px;
            border: none;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Inter', sans-serif;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 8px 24px rgba(75, 46, 25, 0.3);
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(75, 46, 25, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        /* Stats Section */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 0 0 1rem;
        }
        
        .stat-card {
            background: white;
            padding: 2rem 1.5rem;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(75, 46, 25, 0.08);
            transition: var(--transition);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent), var(--secondary));
        }
        
        .stat-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(75, 46, 25, 0.15);
            border-color: var(--accent);
        }
        
        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
            margin-bottom: 0.25rem;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* Category Pills */
        .category-filter {
            display: flex;
            gap: 0.75rem;
            overflow-x: auto;
            padding: 1rem 0;
            margin-bottom: 2rem;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .category-filter::-webkit-scrollbar {
            display: none;
        }
        
        .category-pill {
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            background: white;
            border: 2px solid transparent;
            cursor: pointer;
            white-space: nowrap;
            font-weight: 600;
            font-size: 0.9rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .category-pill:hover {
            border-color: var(--primary);
        }
        
        .category-pill.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            box-shadow: 0 4px 16px rgba(75, 46, 25, 0.3);
        }
        
        /* Sort Filter Bar */
        .sort-filter-bar {
            display: flex;
            gap: 0.75rem;
            overflow-x: auto;
            padding: 1rem 0;
            margin-bottom: 1.5rem;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .sort-filter-bar::-webkit-scrollbar {
            display: none;
        }
        
        .sort-btn {
            padding: 0.75rem 1.25rem;
            border-radius: 50px;
            background: white;
            border: 2px solid var(--bg-main);
            cursor: pointer;
            white-space: nowrap;
            font-weight: 600;
            font-size: 0.85rem;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-dark);
            font-family: 'Inter', sans-serif;
        }
        
        .sort-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .sort-btn.active {
            background: linear-gradient(135deg, var(--accent), var(--secondary));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 16px rgba(212, 165, 116, 0.3);
        }
        
        /* Search Bar */
        .search-bar {
            margin-bottom: 2rem;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 1rem 3rem 1rem 1.5rem;
            border: 2px solid var(--bg-main);
            border-radius: 50px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 4px 16px rgba(75, 46, 25, 0.1);
        }
        
        .search-icon {
            position: absolute;
            right: 1.5rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
            font-size: 1.2rem;
        }
        
        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .product-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-hover);
        }
        
        .product-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, #27AE60, #229954);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            z-index: 2;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        .favorite-btn {
            position: absolute;
            top: 1rem;
            left: 1rem;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            z-index: 2;
            font-size: 1.2rem;
            color: var(--text-light);
        }
        
        .favorite-btn:hover {
            background: white;
            transform: scale(1.1);
        }
        
        .favorite-btn.active {
            color: #E74C3C;
            background: rgba(231, 76, 60, 0.1);
        }
        
        .favorite-btn.active i {
            animation: heartBeat 0.3s ease;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }
        
        .product-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #FBF6F1, #F5E6D3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 6rem;
            position: relative;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-image::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, transparent 40%, rgba(75, 46, 25, 0.05) 100%);
        }
        
        .product-info {
            padding: 1.5rem;
        }
        
        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 0.75rem;
        }
        
        .product-name {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .product-price {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .original-price {
            text-decoration: line-through;
            font-size: 1rem;
            color: var(--text-light);
            font-weight: 500;
        }
        
        .product-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .stars {
            color: var(--gold);
            font-size: 0.9rem;
        }
        
        .rating-count {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        .product-tagline {
            color: var(--text-light);
            font-size: 0.9rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .product-meta {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 0.85rem;
            color: var(--secondary);
        }
        
        .meta-item i {
            color: var(--accent);
        }
        
        .product-ingredients {
            font-size: 0.85rem;
            color: var(--text-light);
            padding: 0.75rem;
            background: var(--bg-main);
            border-radius: 12px;
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .product-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        .btn-small {
            padding: 0.75rem 1.25rem;
            font-size: 0.9rem;
            flex: 1;
        }
        
        .btn-icon {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            padding: 0;
        }
        
        /* Cart Drawer */
        .cart-drawer {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 450px;
            height: 100%;
            background: white;
            box-shadow: -8px 0 32px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            padding: 2rem;
            overflow-y: auto;
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cart-drawer.active {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--bg-main);
        }
        
        .cart-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .close-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--bg-main);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
            transition: var(--transition);
        }
        
        .close-btn:hover {
            background: var(--primary);
            color: white;
            transform: rotate(90deg);
        }
        
        .cart-empty {
            text-align: center;
            padding: 4rem 2rem;
        }
        
        .cart-empty i {
            font-size: 5rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .cart-items {
            margin-bottom: 2rem;
        }
        
        .cart-item {
            display: flex;
            gap: 1rem;
            padding: 1.25rem;
            background: var(--bg-main);
            border-radius: 16px;
            margin-bottom: 1rem;
            position: relative;
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            flex-shrink: 0;
            overflow: hidden;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
            color: var(--primary);
        }
        
        .cart-item-price {
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 0.75rem;
        }
        
        .quantity-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--primary);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: var(--primary);
            transition: var(--transition);
        }
        
        .quantity-btn:hover:not(:disabled) {
            background: var(--primary);
            color: white;
        }
        
        .quantity-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .quantity {
            font-weight: 700;
            font-size: 1.1rem;
            min-width: 30px;
            text-align: center;
        }
        
        .remove-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: #E74C3C;
            cursor: pointer;
            font-size: 1.2rem;
            transition: var(--transition);
        }
        
        .remove-btn:hover {
            transform: scale(1.2);
        }
        
        .customizations {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(75, 46, 25, 0.1);
        }
        
        .customization-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            color: var(--text-light);
            cursor: pointer;
        }
        
        .customization-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        /* Coupon Section */
        .coupon-section {
            margin-bottom: 1.5rem;
            background: white;
            padding: 1rem;
            border-radius: 12px;
            border: 2px dashed var(--accent);
        }
        
        .coupon-input-group {
            display: flex;
            gap: 0.5rem;
        }
        
        .coupon-input {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--bg-main);
            border-radius: 8px;
            font-size: 0.9rem;
            font-family: 'Inter', sans-serif;
            text-transform: uppercase;
        }
        
        .coupon-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .apply-coupon-btn {
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .apply-coupon-btn:hover:not(:disabled) {
            background: var(--primary-light);
        }
        
        .apply-coupon-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .coupon-message {
            margin-top: 0.75rem;
            padding: 0.5rem;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .coupon-message.success {
            background: #d4edda;
            color: #155724;
        }
        
        .coupon-message.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .available-coupons {
            margin-top: 0.75rem;
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        .coupon-code {
            display: inline-block;
            background: var(--bg-main);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            color: var(--primary);
            margin: 0.25rem 0.25rem 0 0;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .coupon-code:hover {
            background: var(--primary);
            color: white;
        }
        
        .cart-summary {
            background: linear-gradient(135deg, var(--bg-main), #F5E6D3);
            padding: 1.5rem;
            border-radius: 16px;
            margin-bottom: 1rem;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }
        
        .summary-row.discount {
            color: var(--success);
        }
        
        .summary-row.total {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            padding-top: 0.75rem;
            border-top: 2px solid var(--accent);
            margin-top: 0.75rem;
        }
        
        .summary-savings {
            background: var(--success);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            margin-top: 0.75rem;
        }
        
        /* Loyalty Tier Badge */
        .loyalty-tier-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            margin-bottom: 1rem;
        }
        
        .loyalty-tier-badge.bronze {
            background: linear-gradient(135deg, var(--bronze), #A0522D);
            color: white;
        }
        
        .loyalty-tier-badge.silver {
            background: linear-gradient(135deg, var(--silver), #A9A9A9);
            color: white;
        }
        
        .loyalty-tier-badge.gold {
            background: linear-gradient(135deg, var(--gold), #FFA500);
            color: white;
        }
        
        .loyalty-tier-badge.platinum {
            background: linear-gradient(135deg, #E5E4E2, #C0C0C0);
            color: #333;
        }
        
        /* Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        /* Modal */
        .modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            border-radius: var(--radius);
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 85%;
            overflow-y: auto;
            z-index: 1002;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: all;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-header h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 800;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid var(--bg-main);
            border-radius: 12px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-group input.error,
        .form-group select.error,
        .form-group textarea.error {
            border-color: var(--error);
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .form-error {
            color: var(--error);
            font-size: 0.85rem;
            margin-top: 0.25rem;
            display: none;
        }
        
        .form-error.show {
            display: block;
        }
        
        /* Orders Section */
        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .order-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .order-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--bg-main);
        }
        
        .order-id {
            font-weight: 700;
            color: var(--primary);
        }
        
        .order-status {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
        }
        
        .order-status.pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .order-status.confirmed {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .order-status.preparing {
            background: #cce5ff;
            color: #004085;
        }
        
        .order-status.delivered {
            background: #d4edda;
            color: #155724;
        }
        
        .order-items {
            margin-bottom: 1rem;
        }
        
        .order-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            color: var(--text-light);
        }
        
        .order-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 2px solid var(--bg-main);
        }
        
        .order-total {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }
        
        .order-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        /* Favorites Section */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        /* Reviews Section */
        .reviews-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .review-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .review-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .review-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .review-rating {
            color: var(--gold);
        }
        
        .review-content {
            color: var(--text-light);
            line-height: 1.6;
            margin-bottom: 0.5rem;
        }
        
        .review-product {
            font-size: 0.85rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        /* Rewards Section */
        .rewards-header {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--radius);
            color: white;
            margin-bottom: 2rem;
        }
        
        .rewards-points {
            font-size: 4rem;
            font-weight: 800;
            font-family: 'Poppins', sans-serif;
            margin-bottom: 0.5rem;
        }
        
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .reward-card {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
        }
        
        .reward-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        .reward-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .reward-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }
        
        .reward-points {
            color: var(--gold);
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .reward-btn {
            width: 100%;
        }
        
        /* Profile Section */
        .profile-header {
            text-align: center;
            padding: 2rem 0;
        }
        
        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            margin: 0 auto 1rem;
            box-shadow: var(--shadow-hover);
        }
        
        .profile-name {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .profile-email {
            color: var(--text-light);
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .profile-stat {
            text-align: center;
            padding: 1rem;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
        }
        
        .profile-stat-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .profile-stat-label {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        .profile-menu {
            margin-top: 2rem;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem;
            background: white;
            border-radius: 16px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }
        
        .menu-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-hover);
        }
        
        .menu-item-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .menu-item-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--bg-main), #F5E6D3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: var(--primary);
        }
        
        .menu-item-text h3 {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        
        .menu-item-text p {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            box-shadow: 0 8px 32px rgba(75, 46, 25, 0.4);
            z-index: 1003;
            opacity: 0;
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 600;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: all;
        }
        
        /* WhatsApp Float */
        .whatsapp-float {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #25D366, #128C7E);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 24px rgba(37, 211, 102, 0.4);
            cursor: pointer;
            z-index: 998;
            transition: var(--transition);
            text-decoration: none;
        }
        
        .whatsapp-float:hover {
            transform: scale(1.15);
        }
        
        .whatsapp-float i {
            font-size: 2rem;
            color: white;
        }
        
        /* Section Title */
        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
        }
        
        .empty-state i {
            font-size: 5rem;
            color: var(--text-light);
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .empty-state p {
            color: var(--text-light);
            margin-bottom: 2rem;
        }
        
        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero {
                padding: 2rem 1rem 3rem;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero-logo {
                width: 110px;
                height: 110px;
                font-size: 3rem;
            }
            
            .hero-tagline {
                font-size: 0.95rem;
                gap: 0.5rem;
            }
            
            .hero-tagline span {
                padding: 0.4rem 0.8rem;
                font-size: 0.85rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .profile-stats {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Spin Wheel - Premium Design */
        .spin-wheel-container {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            padding: 3rem 2rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow-hover);
            text-align: center;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }
        
        .spin-wheel-container::before {
            content: 'üéØüé∞üéÅ‚ú®';
            position: absolute;
            top: 1rem;
            left: 0;
            right: 0;
            font-size: 3rem;
            opacity: 0.05;
            letter-spacing: 3rem;
            pointer-events: none;
        }
        
        .spin-wheel-wrapper {
            position: relative;
            display: inline-block;
            margin: 2rem auto;
        }
        
        .wheel-outer-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 420px;
            height: 420px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,215,0,0.3) 0%, transparent 70%);
            animation: glowPulse 3s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes glowPulse {
            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.05); }
        }
        
        .spin-wheel {
            position: relative;
            width: 360px;
            height: 360px;
            margin: 0 auto;
            border-radius: 50%;
            background: white;
            box-shadow: 
                0 0 0 12px rgba(255,215,0,0.2),
                0 0 0 24px rgba(255,215,0,0.1),
                0 20px 60px rgba(0,0,0,0.3),
                inset 0 0 0 8px #fff;
            overflow: hidden;
            transform: rotate(0deg);
        }
        
        .wheel-slice {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: 100% 100%;
            clip-path: polygon(0 0, 100% 0, 100% 100%);
            display: flex;
            align-items: flex-start;
            justify-content: flex-end;
            padding: 20% 15% 0 0;
        }
        
        .wheel-slice-content {
            transform: rotate(-22.5deg);
            font-weight: 800;
            font-size: 0.85rem;
            color: white;
            text-shadow: 0 2px 8px rgba(0,0,0,0.4);
            text-align: center;
            line-height: 1.2;
            font-family: 'Poppins', sans-serif;
            letter-spacing: 0.3px;
        }
        
        .wheel-slice-icon {
            display: block;
            font-size: 1.8rem;
            margin-bottom: 0.25rem;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            border-radius: 50%;
            border: 8px solid white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            z-index: 10;
            box-shadow: 
                0 8px 24px rgba(255,215,0,0.5),
                inset 0 2px 8px rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-weight: 800;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
            font-family: 'Poppins', sans-serif;
        }
        
        .wheel-center:hover:not(.disabled) {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 
                0 12px 32px rgba(255,215,0,0.6),
                inset 0 2px 8px rgba(255,255,255,0.5);
        }
        
        .wheel-center:active:not(.disabled) {
            transform: translate(-50%, -50%) scale(0.95);
        }
        
        .wheel-center.disabled {
            background: linear-gradient(135deg, #ccc 0%, #999 100%);
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .wheel-center-icon {
            font-size: 2.5rem;
            margin-bottom: 0.25rem;
            animation: spinIcon 3s linear infinite;
        }
        
        @keyframes spinIcon {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .wheel-center.disabled .wheel-center-icon {
            animation: none;
        }
        
        .wheel-center-text {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .wheel-pointer {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 50px solid #E74C3C;
            z-index: 11;
            filter: drop-shadow(0 6px 12px rgba(231,76,60,0.5));
            animation: pointerBounce 1s ease-in-out infinite;
        }
        
        @keyframes pointerBounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(5px); }
        }
        
        .wheel-pointer::after {
            content: '';
            position: absolute;
            top: -48px;
            left: -20px;
            width: 40px;
            height: 40px;
            background: #E74C3C;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(231,76,60,0.4);
        }
        
        .spin-info {
            margin-top: 2rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,165,0,0.1));
            border-radius: 16px;
            border: 2px solid rgba(255,215,0,0.3);
        }
        
        .spin-status {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .last-spin-time {
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
        }
        
        .spin-countdown {
            margin-top: 1rem;
            padding: 1rem;
            background: white;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .spin-history {
            margin-top: 2rem;
            text-align: left;
        }
        
        .spin-history-title {
            font-family: 'Poppins', sans-serif;
            font-size: 1.3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .spin-history-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        
        .spin-history-item {
            background: white;
            padding: 1rem;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: var(--transition);
        }
        
        .spin-history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .spin-history-reward {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .spin-history-icon {
            font-size: 1.8rem;
        }
        
        .spin-history-date {
            font-size: 0.85rem;
            color: var(--text-light);
        }
        
        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            top: -10px;
            z-index: 9999;
            animation: confettiFall 3s ease-out forwards;
        }
        
        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        /* Product Detail Modal */
        .product-detail-modal {
            max-width: 600px;
            max-height: 90%;
        }
        
        .product-detail-image {
            width: 100%;
            height: 250px;
            background: linear-gradient(135deg, #FBF6F1, #F5E6D3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 8rem;
            border-radius: 16px;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .product-detail-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-detail-content h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .product-detail-pricing {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .detail-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            font-family: 'Poppins', sans-serif;
        }
        
        .detail-original-price {
            font-size: 1.2rem;
            text-decoration: line-through;
            color: var(--text-light);
        }
        
        .detail-discount {
            background: var(--success);
            color: white;
            padding: 0.3rem 0.75rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 700;
        }
        
        .product-detail-description {
            color: var(--text-light);
            line-height: 1.8;
            margin-bottom: 1.5rem;
            font-size: 1.05rem;
        }
        
        .product-detail-highlights {
            background: var(--bg-main);
            padding: 1.25rem;
            border-radius: 12px;
            margin-bottom: 1.5rem;
        }
        
        .highlight-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
            font-size: 0.95rem;
        }
        
        .highlight-item:last-child {
            margin-bottom: 0;
        }
        
        .highlight-icon {
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: var(--primary);
        }
        
        .product-detail-ingredients {
            margin-bottom: 1.5rem;
        }
        
        .ingredients-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }
        
        .ingredient-tag {
            background: white;
            border: 2px solid var(--accent);
            color: var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        *:focus-visible {
            outline: 3px solid var(--primary);
            outline-offset: 3px;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="content-wrapper"><!-- Top Navbar -->
   <nav class="top-navbar" role="navigation" aria-label="Main navigation">
    <div class="logo">
     <div class="logo-icon" id="logo-icon"><img id="logo-image" src="" alt="FRUSHH Logo" style="display: none;" onerror="this.style.display='none'; this.parentElement.innerHTML='ü•§';">
     </div><span id="brand-name">FRUSHH</span>
    </div>
    <div class="top-actions">
     <div class="loyalty-points-display" id="loyaltyPointsDisplay"><i class="fas fa-star"></i> <span id="pointsCount">0</span>
     </div><button class="icon-btn" id="favoritesBtn" aria-label="View favorites"> <i class="fas fa-heart"></i> <span class="badge hidden" id="favoritesBadge">0</span> </button> <button class="icon-btn" id="cartBtn" aria-label="View cart"> <i class="fas fa-shopping-cart"></i> <span class="badge hidden" id="cartBadge">0</span> </button>
    </div>
   </nav><!-- Home Section -->
   <section class="section-container active" id="homeSection">
    <div class="hero">
     <div class="hero-badge">
      üåü 10,000+ Happy Customers
     </div>
     <div class="hero-logo"><img id="hero-logo-image" src="" alt="FRUSHH Logo" style="display: none;" onerror="this.style.display='none';">
     </div>
     <h1 id="hero-brand">FRUSHH</h1>
     <p class="hero-tagline" id="hero-tagline"><span><i class="fas fa-leaf"></i> <span style="margin-left: 0.3rem;">Fresh</span></span> <span>‚Ä¢</span> <span><i class="fas fa-heart"></i> <span style="margin-left: 0.3rem;">Natural</span></span> <span>‚Ä¢</span> <span><i class="fas fa-ban"></i> <span style="margin-left: 0.3rem;">Zero Added Sugar</span></span></p>
     <p class="hero-subtitle" id="hero-subtitle">Premium natural shakes delivered fresh to your doorstep</p>
     <div class="hero-cta"><button class="btn btn-primary" onclick="switchSection('menuSection')"> <i class="fas fa-utensils"></i> Explore Menu </button> <button class="btn btn-secondary" onclick="openCheckoutModal()"> <i class="fab fa-whatsapp"></i> Order Now </button>
     </div>
    </div>
    <div class="stats">
     <div class="stat-card">
      <div class="stat-icon">
       ‚≠ê
      </div>
      <div class="stat-number">
       4.9
      </div>
      <div class="stat-label">
       Rating
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-icon">
       ü•§
      </div>
      <div class="stat-number">
       8
      </div>
      <div class="stat-label">
       Flavors
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-icon">
       üöÄ
      </div>
      <div class="stat-number">
       10K+
      </div>
      <div class="stat-label">
       Orders
      </div>
     </div>
     <div class="stat-card">
      <div class="stat-icon">
       ‚ö°
      </div>
      <div class="stat-number">
       30m
      </div>
      <div class="stat-label">
       Avg Delivery
      </div>
     </div>
    </div>
   </section><!-- Menu Section -->
   <section class="section-container" id="menuSection">
    <h2 class="section-title">Delicious Menu</h2>
    <div class="search-bar"><input type="text" class="search-input" id="searchInput" placeholder="Search for shakes..." aria-label="Search shakes"> <i class="fas fa-search search-icon"></i>
    </div>
    <div class="sort-filter-bar"><button class="sort-btn active" data-sort="featured" aria-label="Featured sorting"> <i class="fas fa-star"></i> Featured </button> <button class="sort-btn" data-sort="price-low" aria-label="Price low to high"> <i class="fas fa-sort-amount-up"></i> Price: Low </button> <button class="sort-btn" data-sort="price-high" aria-label="Price high to low"> <i class="fas fa-sort-amount-down"></i> Price: High </button> <button class="sort-btn" data-sort="rating" aria-label="Top rated"> <i class="fas fa-star"></i> Top Rated </button> <button class="sort-btn" data-sort="popular" aria-label="Most popular"> <i class="fas fa-fire"></i> Popular </button>
    </div>
    <div class="category-filter" id="categoryFilter"><button class="category-pill active" data-category="all"> <i class="fas fa-th"></i> All </button> <button class="category-pill" data-category="Signature"> <i class="fas fa-star"></i> Signature </button> <button class="category-pill" data-category="Fitness"> <i class="fas fa-dumbbell"></i> Fitness </button> <button class="category-pill" data-category="Energy"> <i class="fas fa-bolt"></i> Energy </button> <button class="category-pill" data-category="Classic"> <i class="fas fa-glass-whiskey"></i> Classic </button>
    </div>
    <div class="products-grid" id="productsGrid"></div>
   </section><!-- Orders Section -->
   <section class="section-container" id="ordersSection">
    <h2 class="section-title">My Orders</h2>
    <div class="orders-list" id="ordersList"></div>
   </section><!-- Favorites Section -->
   <section class="section-container" id="favoritesSection">
    <h2 class="section-title">My Favorites</h2>
    <div class="favorites-grid" id="favoritesGrid"></div>
   </section><!-- Rewards Section -->
   <section class="section-container" id="rewardsSection">
    <div class="rewards-header">
     <div id="loyaltyTierBadge"></div>
     <div class="rewards-points" id="rewardsPoints">
      0
     </div>
     <p>Loyalty Points</p>
    </div><!-- Points Breakdown -->
    <div class="rewards-breakdown" style="background: white; padding: 2rem; border-radius: var(--radius); margin-bottom: 2rem; box-shadow: var(--shadow);">
     <h3 style="font-family: 'Poppins', sans-serif; font-size: 1.5rem; font-weight: 800; margin-bottom: 1.5rem; color: var(--primary); display: flex; align-items: center; gap: 0.5rem;"><i class="fas fa-chart-line"></i> Points Breakdown</h3>
     <div id="pointsBreakdown" style="display: flex; flex-direction: column; gap: 1rem;"></div>
    </div><!-- Active Rewards Showcase -->
    <div id="activeRewardsShowcase" style="background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%); padding: 2rem; border-radius: var(--radius); margin-bottom: 2rem; box-shadow: var(--shadow-hover); display: none;">
     <h3 style="font-family: 'Poppins', sans-serif; font-size: 1.5rem; font-weight: 800; margin-bottom: 1.5rem; color: var(--primary); display: flex; align-items: center; gap: 0.5rem;"><i class="fas fa-gift"></i> Your Active Rewards</h3>
     <div id="activeRewardsList" style="display: flex; flex-direction: column; gap: 1rem;"></div>
    </div><!-- Spin Wheel -->
    <div class="spin-wheel-container">
     <h3 style="font-family: 'Poppins', sans-serif; font-size: 2.2rem; font-weight: 900; margin-bottom: 0.5rem; background: linear-gradient(135deg, #FFD700, #FFA500); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">üé∞ Daily Spin &amp; Win Jackpot!</h3>
     <p style="color: var(--text-light); margin-bottom: 1rem; font-size: 1.05rem; font-weight: 600;">Try your luck! Spin once daily for amazing rewards! üéÅ</p>
     <div class="spin-wheel-wrapper">
      <div class="wheel-outer-glow"></div>
      <div class="wheel-pointer"></div>
      <div class="spin-wheel" id="spinWheel"><!-- Wheel Slices with Icons -->
       <div class="wheel-slice" style="background: linear-gradient(135deg, #FFD700, #FFA500); transform: rotate(0deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">‚≠ê</span> <span>10<br>
          Points</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #FF6B6B, #EE5A6F); transform: rotate(45deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">üéüÔ∏è</span> <span>‚Çπ20<br>
          OFF</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #4ECDC4, #44A08D); transform: rotate(90deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">üíé</span> <span>50<br>
          Points</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #95E1D3, #38B2AC); transform: rotate(135deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">ü•§</span> <span>Free<br>
          Shake</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #F38181, #E74C3C); transform: rotate(180deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">üåü</span> <span>25<br>
          Points</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #AA96DA, #9B59B6); transform: rotate(225deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">üé´</span> <span>‚Çπ50<br>
          OFF</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #FCBAD3, #F093FB); transform: rotate(270deg);">
        <div class="wheel-slice-content"><span class="wheel-slice-icon">üèÜ</span> <span>100<br>
          Points</span>
        </div>
       </div>
       <div class="wheel-slice" style="background: linear-gradient(135deg, #FFF59D, #FBC02D); transform: rotate(315deg);">
        <div class="wheel-slice-content" style="color: #333;"><span class="wheel-slice-icon">üçÄ</span> <span>Better<br>
          Luck!</span>
        </div>
       </div>
       <div class="wheel-center" id="spinButton">
        <div class="wheel-center-icon">
         üéØ
        </div>
        <div class="wheel-center-text">
         SPIN
        </div>
       </div>
      </div>
     </div>
     <div class="spin-info">
      <div class="spin-status" id="spinStatus">
       Click the SPIN button to try your luck!
      </div>
      <div class="last-spin-time" id="lastSpinTime"></div>
      <div id="spinCountdown" class="spin-countdown" style="display: none;"></div>
     </div><!-- Spin History -->
     <div class="spin-history" id="spinHistory" style="display: none;">
      <div class="spin-history-title">
       üèÖ Your Spin History
      </div>
      <div class="spin-history-list" id="spinHistoryList"></div>
     </div>
    </div>
    <h3 class="section-title">Available Rewards</h3>
    <div class="rewards-grid" id="rewardsGrid"></div>
   </section><!-- Profile Section -->
   <section class="section-container" id="profileSection">
    <div class="profile-header">
     <div class="profile-avatar" id="profileAvatar"><i class="fas fa-user"></i>
     </div>
     <div class="profile-name" id="profileName">
      Welcome!
     </div>
     <div class="profile-email" id="profileEmail">
      Join FRUSHH Family
     </div>
    </div>
    <div class="profile-stats">
     <div class="profile-stat">
      <div class="profile-stat-number" id="totalOrdersStat">
       0
      </div>
      <div class="profile-stat-label">
       Orders
      </div>
     </div>
     <div class="profile-stat">
      <div class="profile-stat-number" id="totalReviewsStat">
       0
      </div>
      <div class="profile-stat-label">
       Reviews
      </div>
     </div>
     <div class="profile-stat">
      <div class="profile-stat-number" id="favoritesStat">
       0
      </div>
      <div class="profile-stat-label">
       Favorites
      </div>
     </div>
    </div>
    <div class="profile-menu">
     <div class="menu-item" onclick="openLoginModal()">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-user-circle"></i>
       </div>
       <div class="menu-item-text">
        <h3>Account</h3>
        <p>Login or create account</p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
     <div class="menu-item" onclick="switchSection('ordersSection')">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-box"></i>
       </div>
       <div class="menu-item-text">
        <h3>My Orders</h3>
        <p>Track and manage orders</p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
     <div class="menu-item" onclick="switchSection('favoritesSection')">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-heart"></i>
       </div>
       <div class="menu-item-text">
        <h3>Favorites</h3>
        <p>Your saved shakes</p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
     <div class="menu-item" onclick="switchSection('rewardsSection')">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-gift"></i>
       </div>
       <div class="menu-item-text">
        <h3>Rewards</h3>
        <p>Earn and redeem points</p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
     <div class="menu-item" onclick="openReviewModal()">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-star"></i>
       </div>
       <div class="menu-item-text">
        <h3>Write Review</h3>
        <p>Share your experience</p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
     <div class="menu-item">
      <div class="menu-item-content">
       <div class="menu-item-icon"><i class="fas fa-info-circle"></i>
       </div>
       <div class="menu-item-text">
        <h3>About</h3>
        <p>Owner: <span id="owner-name-profile">Prathamesh Vattamwar</span></p>
       </div>
      </div><i class="fas fa-chevron-right"></i>
     </div>
    </div>
   </section><!-- Bottom Navigation -->
   <nav class="bottom-nav" role="navigation" aria-label="Bottom navigation"><button class="nav-item active" data-section="homeSection" aria-label="Home"> <i class="fas fa-home"></i> <span>Home</span> </button> <button class="nav-item" data-section="menuSection" aria-label="Menu"> <i class="fas fa-utensils"></i> <span>Menu</span> </button> <button class="nav-item" data-section="ordersSection" aria-label="Orders"> <i class="fas fa-box"></i> <span>Orders</span> </button> <button class="nav-item" data-section="rewardsSection" aria-label="Rewards"> <i class="fas fa-gift"></i> <span>Rewards</span> </button> <button class="nav-item" data-section="profileSection" aria-label="Profile"> <i class="fas fa-user"></i> <span>Profile</span> </button>
   </nav><!-- Cart Drawer -->
   <aside class="cart-drawer" id="cartDrawer" role="dialog" aria-label="Shopping cart">
    <div class="cart-header">
     <h2><i class="fas fa-shopping-cart"></i> My Cart</h2><button class="close-btn" id="closeCartBtn" aria-label="Close cart"> <i class="fas fa-times"></i> </button>
    </div>
    <div id="cartContent"></div>
   </aside><!-- Overlay -->
   <div class="overlay" id="overlay"></div><!-- Login Modal -->
   <div class="modal" id="loginModal" role="dialog" aria-labelledby="loginTitle">
    <div class="modal-header">
     <h2 id="loginTitle">Welcome to FRUSHH</h2><button class="close-btn" onclick="closeAllModals()" aria-label="Close"> <i class="fas fa-times"></i> </button>
    </div>
    <form id="loginForm">
     <div class="form-group"><label for="loginName"><i class="fas fa-user"></i> Full Name *</label> <input type="text" id="loginName" required placeholder="Enter your name">
      <div class="form-error" id="loginNameError">
       Please enter your name
      </div>
     </div>
     <div class="form-group"><label for="loginPhone"><i class="fas fa-phone"></i> Phone Number *</label> <input type="tel" id="loginPhone" required placeholder="10-digit mobile" pattern="[6-9][0-9]{9}" maxlength="10">
      <div class="form-error" id="loginPhoneError">
       Please enter valid mobile number
      </div>
     </div>
     <div class="form-group"><label for="loginEmail"><i class="fas fa-envelope"></i> Email (Optional)</label> <input type="email" id="loginEmail" placeholder="your@email.com">
     </div><button type="submit" class="btn btn-primary" style="width: 100%;"> <i class="fas fa-sign-in-alt"></i> Continue </button>
    </form>
   </div><!-- Checkout Modal -->
   <div class="modal" id="checkoutModal" role="dialog" aria-labelledby="checkoutTitle">
    <div class="modal-header">
     <h2 id="checkoutTitle">Complete Order</h2><button class="close-btn" onclick="closeAllModals()" aria-label="Close"> <i class="fas fa-times"></i> </button>
    </div>
    <form id="checkoutForm">
     <div class="form-group"><label for="customerName"><i class="fas fa-user"></i> Full Name *</label> <input type="text" id="customerName" required placeholder="Enter your name">
      <div class="form-error" id="nameError">
       Please enter your name
      </div>
     </div>
     <div class="form-group"><label for="customerPhone"><i class="fas fa-phone"></i> Phone Number *</label> <input type="tel" id="customerPhone" required placeholder="10-digit mobile" pattern="[6-9][0-9]{9}" maxlength="10">
      <div class="form-error" id="phoneError">
       Please enter valid mobile number
      </div>
     </div>
     <div class="form-group"><label for="customerAddress"><i class="fas fa-map-marker-alt"></i> Delivery Address *</label> <textarea id="customerAddress" required placeholder="Complete address"></textarea>
      <div class="form-error" id="addressError">
       Please enter address
      </div>
     </div>
     <div class="form-group"><label for="deliveryTime"><i class="fas fa-clock"></i> Delivery Time *</label> <select id="deliveryTime" required> <option value="">Select time slot</option> <option value="8-10 AM">8:00 AM - 10:00 AM</option> <option value="10-12 PM">10:00 AM - 12:00 PM</option> <option value="12-2 PM">12:00 PM - 2:00 PM</option> <option value="2-4 PM">2:00 PM - 4:00 PM</option> <option value="4-6 PM">4:00 PM - 6:00 PM</option> <option value="6-9 PM">6:00 PM - 9:00 PM</option> </select>
      <div class="form-error" id="timeError">
       Please select time
      </div>
     </div>
     <div class="form-group"><label for="orderNotes"><i class="fas fa-sticky-note"></i> Special Instructions</label> <textarea id="orderNotes" placeholder="Any requests..."></textarea>
     </div><button type="submit" class="btn btn-primary" style="width: 100%;" id="checkoutSubmitBtn"> <i class="fab fa-whatsapp"></i> Place Order via WhatsApp </button>
    </form>
   </div><!-- Product Detail Modal -->
   <div class="modal product-detail-modal" id="productDetailModal" role="dialog" aria-labelledby="productDetailTitle">
    <div class="modal-header">
     <h2 id="productDetailTitle">Product Details</h2><button class="close-btn" onclick="closeAllModals()" aria-label="Close"> <i class="fas fa-times"></i> </button>
    </div>
    <div id="productDetailContent"></div>
   </div><!-- Review Modal -->
   <div class="modal" id="reviewModal" role="dialog" aria-labelledby="reviewTitle">
    <div class="modal-header">
     <h2 id="reviewTitle">Write a Review</h2><button class="close-btn" onclick="closeAllModals()" aria-label="Close"> <i class="fas fa-times"></i> </button>
    </div>
    <form id="reviewForm">
     <div class="form-group"><label><i class="fas fa-star"></i> Rating *</label>
      <div style="display: flex; gap: 0.5rem; font-size: 2rem;"><i class="fas fa-star rating-star" data-rating="1" style="cursor: pointer; color: #ddd;"></i> <i class="fas fa-star rating-star" data-rating="2" style="cursor: pointer; color: #ddd;"></i> <i class="fas fa-star rating-star" data-rating="3" style="cursor: pointer; color: #ddd;"></i> <i class="fas fa-star rating-star" data-rating="4" style="cursor: pointer; color: #ddd;"></i> <i class="fas fa-star rating-star" data-rating="5" style="cursor: pointer; color: #ddd;"></i>
      </div><input type="hidden" id="reviewRating" required>
      <div class="form-error" id="ratingError">
       Please select rating
      </div>
     </div>
     <div class="form-group"><label for="reviewProduct"><i class="fas fa-glass-whiskey"></i> Product *</label> <select id="reviewProduct" required> <option value="">Select product</option> </select>
      <div class="form-error" id="reviewProductError">
       Please select product
      </div>
     </div>
     <div class="form-group"><label for="reviewText"><i class="fas fa-comment"></i> Your Review *</label> <textarea id="reviewText" required placeholder="Share your experience..." rows="4"></textarea>
      <div class="form-error" id="reviewTextError">
       Please write a review
      </div>
     </div><button type="submit" class="btn btn-primary" style="width: 100%;" id="reviewSubmitBtn"> <i class="fas fa-paper-plane"></i> Submit Review </button>
    </form>
   </div><!-- WhatsApp Float --> <a href="https://wa.me/919271981229?text=Hi%20FRUSHH!%20I%20want%20to%20order" class="whatsapp-float" id="whatsappFloat" target="_blank" rel="noopener noreferrer" aria-label="Contact on WhatsApp"> <i class="fab fa-whatsapp"></i> </a> <!-- Toast -->
   <div class="toast" id="toast"><i class="fas fa-check-circle"></i> <span id="toastMessage"></span>
   </div>
  </div>
  <script>
        // Products Data
        const products = [
            {
                id: 1,
                name: "Classic Banana",
                price: 79,
                originalPrice: 129,
                category: "Classic",
                imageUrl: "",
                emoji: "üçå",
                calories: "280",
                protein: "8g",
                avgRating: 4.8,
                reviewCount: 245,
                short_description: "Creamy banana goodness with natural sweetness",
                long_description: "Pure bliss in every sip! Fresh bananas blended with cold milk and dates for natural sweetness.",
                ingredients: ["Fresh Bananas", "Milk", "Dates", "Ice"],
                badge: "BEST SELLER"
            },
            {
                id: 2,
                name: "Peanut Power",
                price: 89,
                originalPrice: 149,
                category: "Fitness",
                imageUrl: "",
                emoji: "ü•ú",
                calories: "350",
                protein: "15g",
                avgRating: 4.9,
                reviewCount: 312,
                short_description: "Protein-packed peanut butter shake",
                long_description: "Fuel your fitness goals with this protein-rich peanut butter shake. Perfect post-workout drink!",
                ingredients: ["Peanut Butter", "Milk", "Bananas", "Dates", "Ice"],
                badge: "HIGH PROTEIN"
            },
            {
                id: 3,
                name: "Almond Bliss",
                price: 99,
                originalPrice: 159,
                category: "Signature",
                imageUrl: "",
                emoji: "üå∞",
                calories: "320",
                protein: "12g",
                avgRating: 4.7,
                reviewCount: 198,
                short_description: "Premium almond shake with rich flavor",
                long_description: "Indulge in luxury! Premium almonds blended to creamy perfection with a hint of vanilla.",
                ingredients: ["Almonds", "Milk", "Dates", "Vanilla", "Ice"],
                badge: "PREMIUM"
            },
            {
                id: 4,
                name: "Date Delight",
                price: 69,
                originalPrice: 139,
                category: "Energy",
                imageUrl: "",
                emoji: "ÔøΩÔøΩ",
                calories: "290",
                protein: "7g",
                avgRating: 4.6,
                reviewCount: 156,
                short_description: "Natural energy from premium dates",
                long_description: "Natural sweetness meets instant energy! Packed with dates for sustained power throughout the day.",
                ingredients: ["Dates", "Milk", "Almonds", "Cinnamon", "Ice"],
                badge: "ENERGY BOOST"
            },
            {
                id: 5,
                name: "Banana Almond",
                price: 89,
                originalPrice: 169,
                category: "Signature",
                imageUrl: "",
                emoji: "üçåüå∞",
                calories: "310",
                protein: "11g",
                avgRating: 4.9,
                reviewCount: 287,
                short_description: "Perfect fusion of banana & almond",
                long_description: "The ultimate combo! Creamy bananas meet nutty almonds in this signature blend.",
                ingredients: ["Bananas", "Almonds", "Milk", "Dates", "Ice"],
                badge: "SIGNATURE"
            },
            {
                id: 6,
                name: "PB Banana Boost",
                price: 89,
                originalPrice: 159,
                category: "Fitness",
                imageUrl: "",
                emoji: "üí™",
                calories: "340",
                protein: "14g",
                avgRating: 4.8,
                reviewCount: 231,
                short_description: "Ultimate protein combination",
                long_description: "Double the protein, double the taste! Peanut butter and banana power combo for champions.",
                ingredients: ["Peanut Butter", "Bananas", "Milk", "Dates", "Ice"],
                badge: "FITNESS"
            },
            {
                id: 7,
                name: "Triple Nut",
                price: 99,
                originalPrice: 179,
                category: "Signature",
                imageUrl: "",
                emoji: "ü•úüå∞",
                calories: "360",
                protein: "13g",
                avgRating: 4.7,
                reviewCount: 176,
                short_description: "Premium nut combination",
                long_description: "Three times the luxury! Almonds, peanuts, and cashews in one heavenly shake.",
                ingredients: ["Almonds", "Peanuts", "Cashews", "Milk", "Dates", "Ice"],
                badge: "LUXURY"
            },
            {
                id: 8,
                name: "Energy Bomb",
                price: 89,
                originalPrice: 169,
                category: "Energy",
                imageUrl: "",
                emoji: "‚ö°",
                calories: "330",
                protein: "10g",
                avgRating: 4.8,
                reviewCount: 209,
                short_description: "Maximum natural energy blast",
                long_description: "Explosive energy! Loaded with dates, bananas, and nuts for all-day power.",
                ingredients: ["Dates", "Bananas", "Almonds", "Peanut Butter", "Milk", "Ice"],
                badge: "ENERGIZER"
            }
        ];
        
        // Coupons
        const baseCoupons = {
            'FIRST50': { discount: 50, type: 'flat', minOrder: 0, description: '‚Çπ50 off for first order', maxUses: 1 },
            'SAVE20': { discount: 20, type: 'percentage', minOrder: 200, description: '20% off above ‚Çπ200', maxUses: Infinity },
            'FRUSHH100': { discount: 100, type: 'flat', minOrder: 500, description: 'ÔøΩÔøΩÔøΩ100 off above ‚Çπ500', maxUses: Infinity }
        };
        
        // Get all available coupons including spin rewards
        function getAllCoupons() {
            const allCoupons = { ...baseCoupons };
            
            // Add spin-won coupons from localStorage
            const spinCoupons = JSON.parse(localStorage.getItem('frushh_spin_coupons') || '[]');
            spinCoupons.forEach(coupon => {
                if (!coupon.used) {
                    allCoupons[coupon.code] = {
                        discount: coupon.value,
                        type: 'flat',
                        minOrder: 0,
                        description: `‚Çπ${coupon.value} OFF from Spin Reward`,
                        maxUses: 1,
                        spinReward: true,
                        couponId: coupon.id
                    };
                }
            });
            
            // Add free shake vouchers
            const freeShakes = JSON.parse(localStorage.getItem('frushh_free_shakes') || '[]');
            freeShakes.forEach(shake => {
                if (!shake.used) {
                    allCoupons[shake.code] = {
                        discount: 100,
                        type: 'percentage',
                        minOrder: 0,
                        description: 'FREE SHAKE from Spin Reward',
                        maxUses: 1,
                        freeShake: true,
                        shakeId: shake.id
                    };
                }
            });
            
            return allCoupons;
        }
        
        // Rewards
        const rewards = [
            { id: 1, name: "Free Shake", points: 500, icon: "ü•§", description: "Get any shake free" },
            { id: 2, name: "‚Çπ50 Off", points: 300, icon: "üí∞", description: "‚Çπ50 discount voucher" },
            { id: 3, name: "Extra Toppings", points: 200, icon: "üçì", description: "Free premium toppings" },
            { id: 4, name: "ÔøΩÔøΩÔøΩ100 Off", points: 600, icon: "üíµ", description: "‚Çπ100 discount voucher" }
        ];
        
        // State
        let cart = [];
        let currentFilter = 'all';
        let currentSort = 'featured';
        let appliedCoupon = null;
        let currentUser = null;
        let allData = [];
        let searchQuery = '';
        
        // Data SDK Handler
        const dataHandler = {
            onDataChanged(data) {
                allData = data;
                updateUIWithData();
            }
        };
        
        // Initialize Data SDK
        async function initializeDataSDK() {
            if (window.dataSdk) {
                const result = await window.dataSdk.init(dataHandler);
                if (!result.isOk) {
                    console.error("Failed to initialize Data SDK");
                }
            }
        }
        
        // Update UI with Data
        function updateUIWithData() {
            updateLoyaltyDisplay();
            updateFavoritesDisplay();
            updateOrdersDisplay();
            updateProfileStats();
        }
        
        // Calculate Loyalty Points
        function calculateLoyaltyPoints() {
            const userId = getUserId();
            const orders = allData.filter(d => d.type === 'order' && d.userId === userId);
            const reviews = allData.filter(d => d.type === 'review' && d.userId === userId);
            const spinRewards = allData.filter(d => d.type === 'spin_reward' && d.userId === userId);
            const rewardClaims = allData.filter(d => d.type === 'reward_claim' && d.userId === userId);
            
            let totalPoints = 0;
            orders.forEach(order => totalPoints += (order.loyaltyPoints || 0));
            reviews.forEach(review => totalPoints += (review.loyaltyPoints || 0));
            spinRewards.forEach(spin => totalPoints += (spin.loyaltyPoints || 0));
            rewardClaims.forEach(claim => totalPoints += (claim.loyaltyPoints || 0)); // These are negative
            
            return totalPoints;
        }
        
        // Get Loyalty Tier
        function getLoyaltyTier(points) {
            if (points >= 2000) return { name: 'Platinum', color: 'platinum', icon: 'üíé' };
            if (points >= 1000) return { name: 'Gold', color: 'gold', icon: 'ü•á' };
            if (points >= 500) return { name: 'Silver', color: 'silver', icon: 'ü•à' };
            return { name: 'Bronze', color: 'bronze', icon: 'ü•â' };
        }
        
        // Update Loyalty Display
        function updateLoyaltyDisplay() {
            const userId = getUserId();
            const orders = allData.filter(d => d.type === 'order' && d.userId === userId);
            const reviews = allData.filter(d => d.type === 'review' && d.userId === userId);
            const rewards = allData.filter(d => d.type === 'reward_claim' && d.userId === userId);
            const spinRewards = allData.filter(d => d.type === 'spin_reward' && d.userId === userId);
            
            let points = 0;
            orders.forEach(order => points += (order.loyaltyPoints || 0));
            reviews.forEach(review => points += (review.loyaltyPoints || 0));
            rewards.forEach(reward => points += (reward.loyaltyPoints || 0));
            spinRewards.forEach(spin => points += (spin.loyaltyPoints || 0));
            
            const tier = getLoyaltyTier(points);
            
            const pointsDisplay = document.getElementById('pointsCount');
            if (pointsDisplay) pointsDisplay.textContent = points;
            
            const rewardsPoints = document.getElementById('rewardsPoints');
            if (rewardsPoints) rewardsPoints.textContent = points;
            
            const tierBadge = document.getElementById('loyaltyTierBadge');
            if (tierBadge) {
                tierBadge.innerHTML = `
                    <div class="loyalty-tier-badge ${tier.color}">
                        <span>${tier.icon}</span>
                        <span>${tier.name} Member</span>
                    </div>
                `;
            }
            
            renderRewards(points);
            renderPointsBreakdown(userId);
        }
        
        // Render Points Breakdown
        function renderPointsBreakdown(userId) {
            const breakdownEl = document.getElementById('pointsBreakdown');
            if (!breakdownEl) return;
            
            const orders = allData.filter(d => d.type === 'order' && d.userId === userId);
            const reviews = allData.filter(d => d.type === 'review' && d.userId === userId);
            const spinRewards = allData.filter(d => d.type === 'spin_reward' && d.userId === userId);
            const rewardClaims = allData.filter(d => d.type === 'reward_claim' && d.userId === userId);
            
            const orderPoints = orders.reduce((sum, o) => sum + (o.loyaltyPoints || 0), 0);
            const reviewPoints = reviews.reduce((sum, r) => sum + (r.loyaltyPoints || 0), 0);
            const spinPoints = spinRewards.reduce((sum, s) => sum + (s.loyaltyPoints || 0), 0);
            const claimPoints = rewardClaims.reduce((sum, c) => sum + (c.loyaltyPoints || 0), 0);
            
            const totalEarned = orderPoints + reviewPoints + spinPoints;
            const totalSpent = Math.abs(claimPoints);
            const totalPoints = totalEarned + claimPoints;
            
            breakdownEl.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,165,0,0.1)); border-radius: 12px; border-left: 4px solid var(--gold);">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="width: 45px; height: 45px; background: linear-gradient(135deg, var(--gold), #FFA500); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 12px rgba(255,215,0,0.3);">
                            üõçÔ∏è
                        </div>
                        <div>
                            <div style="font-weight: 700; color: var(--primary);">Orders (${orders.length})</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Earned from purchases</div>
                        </div>
                    </div>
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--success);">+${orderPoints}</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, rgba(231,76,60,0.1), rgba(192,57,43,0.1)); border-radius: 12px; border-left: 4px solid #E74C3C;">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #E74C3C, #C0392B); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 12px rgba(231,76,60,0.3);">
                            üé∞
                        </div>
                        <div>
                            <div style="font-weight: 700; color: var(--primary);">Spin Rewards (${spinRewards.length})</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Won from daily spins</div>
                        </div>
                    </div>
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--success);">+${spinPoints}</div>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, rgba(52,152,219,0.1), rgba(41,128,185,0.1)); border-radius: 12px; border-left: 4px solid #3498DB;">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #3498DB, #2980B9); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 12px rgba(52,152,219,0.3);">
                            ‚≠ê
                        </div>
                        <div>
                            <div style="font-weight: 700; color: var(--primary);">Reviews (${reviews.length})</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Shared your feedback</div>
                        </div>
                    </div>
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--success);">+${reviewPoints}</div>
                </div>
                
                ${totalSpent > 0 ? `
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, rgba(155,89,182,0.1), rgba(142,68,173,0.1)); border-radius: 12px; border-left: 4px solid #9B59B6;">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="width: 45px; height: 45px; background: linear-gradient(135deg, #9B59B6, #8E44AD); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; box-shadow: 0 4px 12px rgba(155,89,182,0.3);">
                            üéÅ
                        </div>
                        <div>
                            <div style="font-weight: 700; color: var(--primary);">Rewards Claimed (${rewardClaims.length})</div>
                            <div style="font-size: 0.85rem; color: var(--text-light);">Redeemed your points</div>
                        </div>
                    </div>
                    <div style="font-size: 1.5rem; font-weight: 800; color: var(--error);">${claimPoints}</div>
                </div>
                ` : ''}
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; background: linear-gradient(135deg, var(--primary), var(--primary-light)); border-radius: 12px; margin-top: 0.5rem; box-shadow: 0 8px 24px rgba(75,46,25,0.3);">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <div style="width: 50px; height: 50px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem;">
                            üí∞
                        </div>
                        <div>
                            <div style="font-weight: 800; color: white; font-size: 1.1rem;">Total Balance</div>
                            <div style="font-size: 0.9rem; color: rgba(255,255,255,0.8);">Available to redeem</div>
                        </div>
                    </div>
                    <div style="font-size: 2rem; font-weight: 900; color: white; font-family: 'Poppins', sans-serif;">${totalPoints}</div>
                </div>
            `;
        }
        
        // Render Rewards
        function renderRewards(userPoints) {
            const grid = document.getElementById('rewardsGrid');
            if (!grid) return;
            
            grid.innerHTML = rewards.map(reward => `
                <div class="reward-card">
                    <div class="reward-icon">${reward.icon}</div>
                    <div class="reward-title">${reward.name}</div>
                    <div class="reward-points">${reward.points} points</div>
                    <p style="color: var(--text-light); margin-bottom: 1rem;">${reward.description}</p>
                    <button class="btn btn-primary reward-btn" 
                            onclick="claimReward(${reward.id}, ${reward.points})"
                            ${userPoints < reward.points ? 'disabled' : ''}>
                        ${userPoints < reward.points ? 'Not Enough Points' : 'Claim Reward'}
                    </button>
                </div>
            `).join('');
        }
        
        // Claim Reward
        async function claimReward(rewardId, pointsCost) {
            const reward = rewards.find(r => r.id === rewardId);
            if (!reward) return;
            
            const currentPoints = calculateLoyaltyPoints();
            if (currentPoints < pointsCost) {
                showToast('Not enough points!');
                return;
            }
            
            const btn = event.target;
            btn.disabled = true;
            btn.innerHTML = '<span class="loading-spinner"></span> Claiming...';
            
            const userId = getUserId();
            const claimData = {
                id: generateId(),
                type: 'reward_claim',
                userId: userId,
                userName: currentUser?.name || 'Guest',
                productName: reward.name,
                loyaltyPoints: -pointsCost,
                timestamp: new Date().toISOString(),
                rewardsClaimed: true
            };
            
            if (window.dataSdk) {
                const result = await window.dataSdk.create(claimData);
                if (result.isOk) {
                    showToast(`${reward.name} claimed! Check WhatsApp for details.`);
                } else {
                    showToast('Failed to claim reward');
                    btn.disabled = false;
                    btn.innerHTML = 'Claim Reward';
                }
            }
        }
        
        // Toggle Favorite
        async function toggleFavorite(productId) {
            if (event) event.stopPropagation();
            
            const userId = getUserId();
            const existingFav = allData.find(d => 
                d.type === 'favorite' && 
                d.userId === userId && 
                d.productId === productId
            );
            
            // Show loading state
            const favoriteButtons = document.querySelectorAll(`.favorite-btn[onclick*="${productId}"]`);
            favoriteButtons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
            });
            
            if (existingFav) {
                if (window.dataSdk) {
                    const result = await window.dataSdk.delete(existingFav);
                    if (result.isOk) {
                        showToast('Removed from favorites');
                    } else {
                        // Re-enable buttons on error
                        favoriteButtons.forEach(btn => {
                            btn.disabled = false;
                            btn.style.opacity = '1';
                        });
                    }
                }
            } else {
                const product = products.find(p => p.id === productId);
                if (!product) {
                    favoriteButtons.forEach(btn => {
                        btn.disabled = false;
                        btn.style.opacity = '1';
                    });
                    return;
                }
                
                const favData = {
                    id: generateId(),
                    type: 'favorite',
                    userId: userId,
                    userName: currentUser?.name || 'Guest',
                    productId: productId,
                    productName: product.name,
                    favorite: true,
                    timestamp: new Date().toISOString()
                };
                
                if (window.dataSdk) {
                    const result = await window.dataSdk.create(favData);
                    if (result.isOk) {
                        showToast('Added to favorites!');
                    } else {
                        // Re-enable buttons on error
                        favoriteButtons.forEach(btn => {
                            btn.disabled = false;
                            btn.style.opacity = '1';
                        });
                    }
                }
            }
            
            // Re-enable buttons after operation
            setTimeout(() => {
                favoriteButtons.forEach(btn => {
                    btn.disabled = false;
                    btn.style.opacity = '1';
                });
            }, 500);
        }
        
        // Check if Favorite
        function isFavorite(productId) {
            const userId = getUserId();
            return allData.some(d => 
                d.type === 'favorite' && 
                d.userId === userId && 
                d.productId === productId
            );
        }
        
        // Update Favorites Display
        function updateFavoritesDisplay() {
            const userId = getUserId();
            const favorites = allData.filter(d => 
                d.type === 'favorite' && 
                d.userId === userId
            );
            
            const badge = document.getElementById('favoritesBadge');
            if (badge) {
                badge.textContent = favorites.length;
                if (favorites.length > 0) {
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }
            }
            
            renderFavoritesGrid(favorites);
        }
        
        // Render Favorites Grid
        function renderFavoritesGrid(favorites) {
            const grid = document.getElementById('favoritesGrid');
            if (!grid) return;
            
            if (favorites.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-heart-broken"></i>
                        <h3>No Favorites Yet</h3>
                        <p>Start adding your favorite shakes!</p>
                        <button class="btn btn-primary" onclick="switchSection('menuSection')">
                            <i class="fas fa-utensils"></i> Browse Menu
                        </button>
                    </div>
                `;
                return;
            }
            
            const favoriteProducts = favorites
                .map(fav => products.find(p => p.id === fav.productId))
                .filter(p => p);
            
            grid.innerHTML = favoriteProducts.map(product => `
                <article class="product-card" onclick="showProductDetail(${product.id})">
                    <button class="favorite-btn active" onclick="toggleFavorite(${product.id})" aria-label="Remove from favorites">
                        <i class="fas fa-heart"></i>
                    </button>
                    ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                    <div class="product-image">${product.emoji || ''}</div>
                    <div class="product-info">
                        <div class="product-header">
                            <div>
                                <div class="product-name">${product.name}</div>
                                ${product.originalPrice ? `<div class="original-price">‚Çπ${product.originalPrice}</div>` : ''}
                            </div>
                            <div class="product-price">‚Çπ${product.price}</div>
                        </div>
                        <div class="product-rating">
                            <div class="stars">${'‚òÖ'.repeat(Math.round(product.avgRating))}</div>
                            <span class="rating-count">(${product.reviewCount})</span>
                        </div>
                        <p class="product-tagline">${product.short_description}</p>
                        <div class="product-actions">
                            <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> Add
                            </button>
                        </div>
                    </div>
                </article>
            `).join('');
        }
        
        // Auto-update order status
        async function autoUpdateOrderStatus(order) {
            if (!order || order.status === 'delivered') return;
            
            const orderTime = new Date(order.timestamp);
            const now = new Date();
            const secondsPassed = Math.floor((now - orderTime) / 1000);
            
            let newStatus = order.status;
            
            // Status progression timeline (TESTING MODE):
            // 0-10 seconds: pending
            // 10-40 seconds: confirmed (preparing your shake)
            // 40-60 seconds: preparing (almost ready)
            // 60+ seconds: delivered
            
            if (secondsPassed >= 60 && order.status !== 'delivered') {
                newStatus = 'delivered';
            } else if (secondsPassed >= 40 && order.status !== 'preparing' && order.status !== 'delivered') {
                newStatus = 'preparing';
            } else if (secondsPassed >= 10 && order.status === 'pending') {
                newStatus = 'confirmed';
            }
            
            // Update if status changed
            if (newStatus !== order.status && window.dataSdk) {
                const updatedOrder = { ...order, status: newStatus };
                const result = await window.dataSdk.update(updatedOrder);
                
                if (result.isOk && newStatus === 'delivered') {
                    showToast(`üéâ Order #${order.id.substring(0, 8)} has been delivered!`);
                }
            }
        }
        
        // Update Orders Display
        function updateOrdersDisplay() {
            const userId = getUserId();
            const orders = allData
                .filter(d => d.type === 'order' && d.userId === userId)
                .sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Auto-update order statuses
            orders.forEach(order => autoUpdateOrderStatus(order));
            
            const list = document.getElementById('ordersList');
            if (!list) return;
            
            if (orders.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-box-open"></i>
                        <h3>No Orders Yet</h3>
                        <p>Start ordering delicious shakes!</p>
                        <button class="btn btn-primary" onclick="switchSection('menuSection')">
                            <i class="fas fa-utensils"></i> Browse Menu
                        </button>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = orders.map(order => {
                const orderTime = new Date(order.timestamp);
                const now = new Date();
                const minutesPassed = Math.floor((now - orderTime) / (1000 * 60));
                
                // Display estimated time based on current status
                let statusMessage = '';
                if (order.status === 'pending') {
                    statusMessage = '<div style="font-size: 0.8rem; color: var(--warning); margin-top: 0.5rem;"><i class="fas fa-clock"></i> Confirming order...</div>';
                } else if (order.status === 'confirmed') {
                    statusMessage = '<div style="font-size: 0.8rem; color: var(--info); margin-top: 0.5rem;"><i class="fas fa-check-circle"></i> Preparing your shake...</div>';
                } else if (order.status === 'preparing') {
                    statusMessage = '<div style="font-size: 0.8rem; color: var(--primary); margin-top: 0.5rem;"><i class="fas fa-blender"></i> Almost ready!</div>';
                } else if (order.status === 'delivered') {
                    statusMessage = '<div style="font-size: 0.8rem; color: var(--success); margin-top: 0.5rem;"><i class="fas fa-check-double"></i> Delivered!</div>';
                }
                
                return `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <div class="order-id">Order #${order.id.substring(0, 8)}</div>
                            <div style="color: var(--text-light); font-size: 0.85rem; margin-top: 0.25rem;">
                                ${orderTime.toLocaleDateString()} at ${orderTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                            </div>
                            ${statusMessage}
                        </div>
                        <div class="order-status ${order.status}">${order.status}</div>
                    </div>
                    <div class="order-items">
                        <div class="order-item">
                            <span>${order.productName}</span>
                        </div>
                    </div>
                    <div class="order-footer">
                        <div class="order-total">‚Çπ${order.totalAmount}</div>
                        <div class="order-actions">
                            <button class="btn btn-small btn-secondary" onclick="reorder('${order.id}')">
                                <i class="fas fa-redo"></i> Reorder
                            </button>
                            ${order.status === 'delivered' ? `
                            <button class="btn btn-small btn-primary" onclick="openReviewModal()" style="margin-left: 0.5rem;">
                                <i class="fas fa-star"></i> Review
                            </button>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `;
            }).join('');
        }
        
        // Reorder
        function reorder(orderId) {
            const order = allData.find(d => d.id === orderId);
            if (!order) return;
            
            const product = products.find(p => p.name === order.productName);
            if (!product) return;
            
            for (let i = 0; i < (order.quantity || 1); i++) {
                addToCart(product.id);
            }
            
            switchSection('menuSection');
            showToast('Items added to cart!');
        }
        
        // Update Profile Stats
        function updateProfileStats() {
            const userId = getUserId();
            
            const orders = allData.filter(d => d.type === 'order' && d.userId === userId);
            const reviews = allData.filter(d => d.type === 'review' && d.userId === userId);
            const favorites = allData.filter(d => d.type === 'favorite' && d.userId === userId);
            
            const totalOrdersEl = document.getElementById('totalOrdersStat');
            const totalReviewsEl = document.getElementById('totalReviewsStat');
            const favoritesEl = document.getElementById('favoritesStat');
            
            if (totalOrdersEl) totalOrdersEl.textContent = orders.length;
            if (totalReviewsEl) totalReviewsEl.textContent = reviews.length;
            if (favoritesEl) favoritesEl.textContent = favorites.length;
        }
        
        // Generate User ID
        function getUserId() {
            let userId = localStorage.getItem('frushh_user_id');
            if (!userId) {
                userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('frushh_user_id', userId);
            }
            return userId;
        }
        
        // Generate ID
        function generateId() {
            return Date.now().toString() + '_' + Math.random().toString(36).substr(2, 9);
        }
        
        // LocalStorage Functions
        function saveCartToStorage() {
            localStorage.setItem('frushh_cart', JSON.stringify(cart));
        }
        
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('frushh_cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }
        
        function loadUserFromStorage() {
            const savedUser = localStorage.getItem('frushh_user');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserDisplay();
            }
        }
        
        function updateUserDisplay() {
            if (currentUser) {
                const nameEl = document.getElementById('profileName');
                const emailEl = document.getElementById('profileEmail');
                const avatarEl = document.getElementById('profileAvatar');
                
                if (nameEl) nameEl.textContent = currentUser.name;
                if (emailEl) emailEl.textContent = currentUser.email || currentUser.phone;
                if (avatarEl) {
                    avatarEl.innerHTML = currentUser.name.charAt(0).toUpperCase();
                }
            }
        }
        
        // Config
        const defaultConfig = {
            business_name: "FRUSHH",
            tagline: "Fresh ‚Ä¢ Natural ‚Ä¢ Zero Added Sugar",
            whatsapp_number: "919271981229",
            owner_name: "Prathamesh Vattamwar",
            hero_subtitle: "Premium natural shakes delivered fresh to your doorstep",
            logo_url: "",
            background_color: "#FBF6F1",
            surface_color: "#FFFFFF",
            text_color: "#4B2E19",
            primary_action_color: "#4B2E19",
            secondary_action_color: "#6B4423",
            font_family: "Inter",
            font_size: 16
        };
        
        let config = { ...defaultConfig };
        
        // Elements SDK
        async function onConfigChange(newConfig) {
            config = { ...newConfig };
            
            const businessName = config.business_name || defaultConfig.business_name;
            const heroSubtitle = config.hero_subtitle || defaultConfig.hero_subtitle;
            const ownerName = config.owner_name || defaultConfig.owner_name;
            const logoUrl = config.logo_url || defaultConfig.logo_url;
            
            const brandNameEl = document.getElementById('brand-name');
            const heroBrandEl = document.getElementById('hero-brand');
            const heroSubtitleEl = document.getElementById('hero-subtitle');
            const ownerNameEl = document.getElementById('owner-name-profile');
            
            if (brandNameEl) brandNameEl.textContent = businessName;
            if (heroBrandEl) heroBrandEl.textContent = businessName;
            if (heroSubtitleEl) heroSubtitleEl.textContent = heroSubtitle;
            if (ownerNameEl) ownerNameEl.textContent = ownerName;
            
            if (logoUrl) {
                const logoImage = document.getElementById('logo-image');
                const heroLogoImage = document.getElementById('hero-logo-image');
                if (logoImage) {
                    logoImage.src = logoUrl;
                    logoImage.style.display = 'block';
                }
                if (heroLogoImage) {
                    heroLogoImage.src = logoUrl;
                    heroLogoImage.style.display = 'block';
                }
            }
            
            const whatsappNumber = config.whatsapp_number || defaultConfig.whatsapp_number;
            const whatsappFloat = document.getElementById('whatsappFloat');
            if (whatsappFloat) {
                whatsappFloat.href = `https://wa.me/${whatsappNumber}?text=Hi%20FRUSHH!%20I%20want%20to%20order`;
            }
            
            const bgColor = config.background_color || defaultConfig.background_color;
            const surfaceColor = config.surface_color || defaultConfig.surface_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
            
            document.body.style.background = bgColor;
            document.body.style.color = textColor;
            
            document.documentElement.style.setProperty('--bg-main', bgColor);
            document.documentElement.style.setProperty('--bg-card', surfaceColor);
            document.documentElement.style.setProperty('--text-dark', textColor);
            document.documentElement.style.setProperty('--primary', primaryColor);
            
            const customFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = 'Arial, sans-serif';
            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
            
            const baseSize = config.font_size || defaultConfig.font_size;
            document.body.style.fontSize = `${baseSize}px`;
        }
        
        function mapToCapabilities(config) {
            return {
                recolorables: [
                    {
                        get: () => config.background_color || defaultConfig.background_color,
                        set: (value) => {
                            config.background_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
                        }
                    },
                    {
                        get: () => config.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            config.surface_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ surface_color: value });
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
                        }
                    },
                    {
                        get: () => config.primary_action_color || defaultConfig.primary_action_color,
                        set: (value) => {
                            config.primary_action_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ primary_action_color: value });
                        }
                    },
                    {
                        get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
                        set: (value) => {
                            config.secondary_action_color = value;
                            if (window.elementSdk) window.elementSdk.setConfig({ secondary_action_color: value });
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || defaultConfig.font_family,
                    set: (value) => {
                        config.font_family = value;
                        if (window.elementSdk) window.elementSdk.setConfig({ font_family: value });
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || defaultConfig.font_size,
                    set: (value) => {
                        config.font_size = value;
                        if (window.elementSdk) window.elementSdk.setConfig({ font_size: value });
                    }
                }
            };
        }
        
        function mapToEditPanelValues(config) {
            return new Map([
                ["business_name", config.business_name || defaultConfig.business_name],
                ["tagline", config.tagline || defaultConfig.tagline],
                ["whatsapp_number", config.whatsapp_number || defaultConfig.whatsapp_number],
                ["owner_name", config.owner_name || defaultConfig.owner_name],
                ["logo_url", config.logo_url || defaultConfig.logo_url],
                ["hero_subtitle", config.hero_subtitle || defaultConfig.hero_subtitle]
            ]);
        }
        
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities,
                mapToEditPanelValues
            });
        }
        
        // Section Switching
        function switchSection(sectionId) {
            document.querySelectorAll('.section-container').forEach(section => {
                section.classList.remove('active');
            });
            const targetSection = document.getElementById(sectionId);
            if (targetSection) targetSection.classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeNav = document.querySelector(`[data-section="${sectionId}"]`);
            if (activeNav) activeNav.classList.add('active');
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Navigation Event Listeners
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const section = this.getAttribute('data-section');
                switchSection(section);
            });
        });
        
        // Search Functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            searchQuery = e.target.value.toLowerCase();
            renderProducts(currentFilter);
        });
        
        // Render Products
        function renderProducts(filter = 'all', sort = null) {
            currentFilter = filter;
            if (sort !== null) currentSort = sort;
            
            const grid = document.getElementById('productsGrid');
            if (!grid) return;
            
            let filtered = filter === 'all' ? [...products] : products.filter(p => p.category === filter);
            
            if (searchQuery) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(searchQuery) ||
                    p.short_description.toLowerCase().includes(searchQuery) ||
                    p.category.toLowerCase().includes(searchQuery)
                );
            }
            
            // Apply sorting
            switch(currentSort) {
                case 'price-low':
                    filtered.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filtered.sort((a, b) => b.price - a.price);
                    break;
                case 'rating':
                    filtered.sort((a, b) => b.avgRating - a.avgRating);
                    break;
                case 'popular':
                    filtered.sort((a, b) => b.reviewCount - a.reviewCount);
                    break;
                case 'featured':
                default:
                    // Keep original order for featured
                    break;
            }
            
            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-search"></i>
                        <h3>No Results Found</h3>
                        <p>Try different search terms</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = filtered.map(product => `
                <article class="product-card" onclick="showProductDetail(${product.id})">
                    <button class="favorite-btn ${isFavorite(product.id) ? 'active' : ''}" 
                            onclick="toggleFavorite(${product.id})" 
                            aria-label="Add to favorites">
                        <i class="fas fa-heart"></i>
                    </button>
                    ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
                    <div class="product-image">${product.emoji || ''}</div>
                    <div class="product-info">
                        <div class="product-header">
                            <div>
                                <div class="product-name">${product.name}</div>
                                ${product.originalPrice ? `<div class="original-price">‚Çπ${product.originalPrice}</div>` : ''}
                            </div>
                            <div class="product-price">‚Çπ${product.price}</div>
                        </div>
                        <div class="product-rating">
                            <div class="stars">${'‚òÖ'.repeat(Math.round(product.avgRating))}</div>
                            <span class="rating-count">(${product.reviewCount})</span>
                        </div>
                        <p class="product-tagline">${product.short_description}</p>
                        <div class="product-meta">
                            <div class="meta-item">
                                <i class="fas fa-fire"></i>
                                <span>${product.calories} cal</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-dumbbell"></i>
                                <span>${product.protein}</span>
                            </div>
                        </div>
                        <div class="product-ingredients">
                            <strong><i class="fas fa-leaf"></i> Ingredients:</strong> ${product.ingredients.join(', ')}
                        </div>
                        <div class="product-actions">
                            <button class="btn btn-primary btn-small" onclick="event.stopPropagation(); addToCart(${product.id})">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </article>
            `).join('');
        }
        
        // Filter Products
        document.getElementById('categoryFilter').addEventListener('click', function(e) {
            const pill = e.target.closest('.category-pill');
            if (!pill) return;
            
            document.querySelectorAll('.category-pill').forEach(p => p.classList.remove('active'));
            pill.classList.add('active');
            
            const category = pill.getAttribute('data-category');
            renderProducts(category);
        });
        
        // Sort Products
        document.addEventListener('click', function(e) {
            const sortBtn = e.target.closest('.sort-btn');
            if (!sortBtn) return;
            
            document.querySelectorAll('.sort-btn').forEach(btn => btn.classList.remove('active'));
            sortBtn.classList.add('active');
            
            const sortType = sortBtn.getAttribute('data-sort');
            renderProducts(currentFilter, sortType);
        });
        
        // Add to Cart
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1,
                    customizations: {
                        extraDates: false,
                        extraPB: false,
                        lessIce: false
                    }
                });
            }
            
            saveCartToStorage();
            updateCart();
            showToast(`${product.name} added to cart!`);
        }
        
        // Apply Coupon
        function applyCoupon() {
            const couponInput = document.getElementById('couponInput');
            const code = couponInput.value.trim().toUpperCase();
            const messageDiv = document.getElementById('couponMessage');
            
            if (!code) {
                messageDiv.className = 'coupon-message error';
                messageDiv.textContent = 'Please enter a coupon code';
                messageDiv.style.display = 'block';
                return;
            }
            
            const allCoupons = getAllCoupons();
            
            if (!allCoupons[code]) {
                messageDiv.className = 'coupon-message error';
                messageDiv.textContent = 'Invalid coupon code';
                messageDiv.style.display = 'block';
                return;
            }
            
            const coupon = allCoupons[code];
            const subtotal = calculateSubtotal();
            
            if (subtotal < coupon.minOrder) {
                messageDiv.className = 'coupon-message error';
                messageDiv.textContent = `Minimum order of ‚Çπ${coupon.minOrder} required`;
                messageDiv.style.display = 'block';
                return;
            }
            
            appliedCoupon = { code, ...coupon };
            messageDiv.className = 'coupon-message success';
            messageDiv.textContent = `‚úì Coupon applied! ${coupon.description}`;
            messageDiv.style.display = 'block';
            couponInput.disabled = true;
            const applyBtn = document.getElementById('applyCouponBtn');
            if (applyBtn) applyBtn.disabled = true;
            
            updateCart();
            showToast('Coupon applied successfully! üéâ');
        }
        
        // Calculate Subtotal
        function calculateSubtotal() {
            return cart.reduce((sum, item) => {
                let itemTotal = item.price * item.quantity;
                if (item.customizations.extraDates) itemTotal += 10 * item.quantity;
                if (item.customizations.extraPB) itemTotal += 15 * item.quantity;
                return sum + itemTotal;
            }, 0);
        }
        
        // Calculate Discount
        function calculateDiscount(subtotal) {
            if (!appliedCoupon) return 0;
            
            if (appliedCoupon.type === 'flat') {
                return appliedCoupon.discount;
            } else {
                return Math.floor((subtotal * appliedCoupon.discount) / 100);
            }
        }
        
        // Update Cart
        function updateCart() {
            const badge = document.getElementById('cartBadge');
            const cartContent = document.getElementById('cartContent');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (badge) {
                badge.textContent = totalItems;
                
                if (totalItems === 0) {
                    badge.classList.add('hidden');
                } else {
                    badge.classList.remove('hidden');
                }
            }
            
            if (!cartContent) return;
            
            if (cart.length === 0) {
                cartContent.innerHTML = `
                    <div class="cart-empty">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Your cart is empty</h3>
                        <p style="margin-top: 0.5rem; color: var(--text-light);">Add some delicious shakes!</p>
                        <button class="btn btn-primary" style="margin-top: 2rem;" onclick="switchSection('menuSection'); closeCart()">
                            <i class="fas fa-utensils"></i> Browse Menu
                        </button>
                    </div>
                `;
                return;
            }
            
            const subtotal = calculateSubtotal();
            const discount = calculateDiscount(subtotal);
            const total = subtotal - discount;
            const originalTotal = cart.reduce((sum, item) => sum + (item.originalPrice || item.price) * item.quantity, 0);
            const savings = originalTotal - total;
            
            cartContent.innerHTML = `
                <div class="cart-items">
                    ${cart.map(item => `
                        <div class="cart-item">
                            <div class="cart-item-image">${item.emoji || ''}</div>
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name}</div>
                                <div class="cart-item-price">‚Çπ${item.price} each</div>
                                <div class="quantity-control">
                                    <button class="quantity-btn" onclick="updateQuantity(${item.id}, ${item.quantity - 1})" aria-label="Decrease">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <span class="quantity">${item.quantity}</span>
                                    <button class="quantity-btn" onclick="updateQuantity(${item.id}, ${item.quantity + 1})" aria-label="Increase">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div class="customizations">
                                    <label class="customization-label">
                                        <input type="checkbox" ${item.customizations.extraDates ? 'checked' : ''} 
                                               onchange="updateCustomization(${item.id}, 'extraDates', this.checked)">
                                        Extra Dates (+‚Çπ10)
                                    </label>
                                    <label class="customization-label">
                                        <input type="checkbox" ${item.customizations.extraPB ? 'checked' : ''} 
                                               onchange="updateCustomization(${item.id}, 'extraPB', this.checked)">
                                        Extra Peanut Butter (+‚Çπ15)
                                    </label>
                                    <label class="customization-label">
                                        <input type="checkbox" ${item.customizations.lessIce ? 'checked' : ''} 
                                               onchange="updateCustomization(${item.id}, 'lessIce', this.checked)">
                                        Less Ice
                                    </label>
                                </div>
                            </div>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})" aria-label="Remove">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `).join('')}
                </div>
                
                <div class="coupon-section">
                    <div class="coupon-input-group">
                        <input type="text" id="couponInput" class="coupon-input" placeholder="Enter coupon code" ${appliedCoupon ? 'disabled' : ''}>
                        <button class="apply-coupon-btn" id="applyCouponBtn" onclick="applyCoupon()" ${appliedCoupon ? 'disabled' : ''}>
                            Apply
                        </button>
                    </div>
                    <div id="couponMessage" class="coupon-message" style="display: ${appliedCoupon ? 'block' : 'none'};">
                        ${appliedCoupon ? `‚úì Coupon applied! ${appliedCoupon.description}` : ''}
                    </div>
                    <div class="available-coupons">
                        <strong>Available Coupons:</strong><br>
                        ${Object.entries(getAllCoupons()).map(([code, coupon]) => 
                            `<span class="coupon-code" onclick="document.getElementById('couponInput').value='${code}'; applyCoupon();" style="${coupon.spinReward || coupon.freeShake ? 'background: linear-gradient(135deg, #FFD700, #FFA500); color: white; font-weight: 700; animation: pulse 2s infinite;' : ''}">${code}${coupon.spinReward || coupon.freeShake ? ' üéÅ' : ''}</span>`
                        ).join(' ')}
                    </div>
                </div>
                
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span>‚Çπ${subtotal}</span>
                    </div>
                    ${discount > 0 ? `
                    <div class="summary-row discount">
                        <span>Discount (${appliedCoupon.code}):</span>
                        <span>-‚Çπ${discount}</span>
                    </div>
                    ` : ''}
                    <div class="summary-row">
                        <span>Delivery:</span>
                        <span style="color: var(--success);">FREE</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total:</span>
                        <span>‚Çπ${total}</span>
                    </div>
                    ${savings > 0 ? `
                    <div class="summary-savings">
                        üéâ You're saving ‚Çπ${savings} on this order!
                    </div>
                    ` : ''}
                </div>
                <button class="btn btn-primary" style="width: 100%;" onclick="openCheckoutModal()">
                    <i class="fab fa-whatsapp"></i> Proceed to Checkout
                </button>
            `;
        }
        
        // Cart Functions
        function updateQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.quantity = newQuantity;
                saveCartToStorage();
                updateCart();
            }
        }
        
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCartToStorage();
            updateCart();
            showToast('Item removed from cart');
        }
        
        function updateCustomization(productId, customization, value) {
            const item = cart.find(i => i.id === productId);
            if (item) {
                item.customizations[customization] = value;
                saveCartToStorage();
                updateCart();
            }
        }
        
        // Cart Toggle
        const cartBtn = document.getElementById('cartBtn');
        if (cartBtn) {
            cartBtn.addEventListener('click', () => {
                const drawer = document.getElementById('cartDrawer');
                const overlay = document.getElementById('overlay');
                if (drawer) drawer.classList.add('active');
                if (overlay) overlay.classList.add('active');
            });
        }
        
        const closeCartBtn = document.getElementById('closeCartBtn');
        if (closeCartBtn) {
            closeCartBtn.addEventListener('click', closeCart);
        }
        
        const overlay = document.getElementById('overlay');
        if (overlay) {
            overlay.addEventListener('click', () => {
                closeCart();
                closeAllModals();
            });
        }
        
        function closeCart() {
            const drawer = document.getElementById('cartDrawer');
            const overlay = document.getElementById('overlay');
            if (drawer) drawer.classList.remove('active');
            if (overlay) overlay.classList.remove('active');
        }
        
        // Favorites Button
        const favoritesBtn = document.getElementById('favoritesBtn');
        if (favoritesBtn) {
            favoritesBtn.addEventListener('click', () => {
                switchSection('favoritesSection');
            });
        }
        
        // Modals
        function openLoginModal() {
            closeAllModals();
            const modal = document.getElementById('loginModal');
            const overlay = document.getElementById('overlay');
            if (modal) modal.classList.add('active');
            if (overlay) overlay.classList.add('active');
        }
        
        function openCheckoutModal() {
            if (cart.length === 0) {
                showToast('Your cart is empty!');
                return;
            }
            
            closeCart();
            closeAllModals();
            
            const modal = document.getElementById('checkoutModal');
            const overlay = document.getElementById('overlay');
            if (modal) modal.classList.add('active');
            if (overlay) overlay.classList.add('active');
            
            if (currentUser) {
                const nameInput = document.getElementById('customerName');
                const phoneInput = document.getElementById('customerPhone');
                if (nameInput) nameInput.value = currentUser.name;
                if (phoneInput) phoneInput.value = currentUser.phone;
            }
        }
        
        // Show Product Detail
        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const discount = product.originalPrice ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100) : 0;
            
            const content = document.getElementById('productDetailContent');
            if (content) {
                content.innerHTML = `
                    <div class="product-detail-image">${product.emoji || ''}</div>
                    <div class="product-detail-content">
                        <h2>${product.name}</h2>
                        <div class="product-detail-pricing">
                            <div class="detail-price">‚Çπ${product.price}</div>
                            ${product.originalPrice ? `<div class="detail-original-price">‚Çπ${product.originalPrice}</div>` : ''}
                            ${discount > 0 ? `<div class="detail-discount">${discount}% OFF</div>` : ''}
                        </div>
                        <p class="product-detail-description">${product.long_description}</p>
                        
                        <div class="product-detail-highlights">
                            <h4 style="font-weight: 700; margin-bottom: 1rem; color: var(--primary);">
                                <i class="fas fa-star"></i> Why You'll Love It
                            </h4>
                            <div class="highlight-item">
                                <div class="highlight-icon"><i class="fas fa-fire"></i></div>
                                <div>
                                    <strong>Calories:</strong> ${product.calories} cal - Perfect energy boost!
                                </div>
                            </div>
                            <div class="highlight-item">
                                <div class="highlight-icon"><i class="fas fa-dumbbell"></i></div>
                                <div>
                                    <strong>Protein:</strong> ${product.protein} - Muscle building power
                                </div>
                            </div>
                            <div class="highlight-item">
                                <div class="highlight-icon"><i class="fas fa-leaf"></i></div>
                                <div>
                                    <strong>100% Natural:</strong> No added sugar, pure goodness
                                </div>
                            </div>
                            <div class="highlight-item">
                                <div class="highlight-icon"><i class="fas fa-bolt"></i></div>
                                <div>
                                    <strong>Fresh:</strong> Made to order, delivered fresh to you
                                </div>
                            </div>
                        </div>
                        
                        <div class="product-detail-ingredients">
                            <h4 style="font-weight: 700; margin-bottom: 0.5rem; color: var(--primary);">
                                <i class="fas fa-list"></i> Premium Ingredients
                            </h4>
                            <div class="ingredients-list">
                                ${product.ingredients.map(ing => `<div class="ingredient-tag">${ing}</div>`).join('')}
                            </div>
                        </div>
                        
                        <div class="product-rating" style="margin-bottom: 1.5rem;">
                            <div class="stars" style="font-size: 1.2rem;">${'‚òÖ'.repeat(Math.round(product.avgRating))}</div>
                            <span class="rating-count" style="font-size: 1rem;">${product.avgRating} (${product.reviewCount} reviews)</span>
                        </div>
                        
                        <button class="btn btn-primary" style="width: 100%; font-size: 1.1rem; padding: 1.25rem;" onclick="event.stopPropagation(); addToCart(${product.id}); closeAllModals();">
                            <i class="fas fa-cart-plus"></i> Add to Cart - ‚Çπ${product.price}
                        </button>
                    </div>
                `;
            }
            
            closeAllModals();
            const modal = document.getElementById('productDetailModal');
            const overlay = document.getElementById('overlay');
            if (modal) modal.classList.add('active');
            if (overlay) overlay.classList.add('active');
        }
        
        function openReviewModal() {
            closeAllModals();
            
            // Get user's delivered orders
            const userId = getUserId();
            const deliveredOrders = allData.filter(d => 
                d.type === 'order' && 
                d.userId === userId && 
                d.status === 'delivered'
            );
            
            if (deliveredOrders.length === 0) {
                showToast('‚ö†Ô∏è You can only review products you\'ve purchased and received!');
                return;
            }
            
            // Get unique product names from delivered orders
            const purchasedProducts = [...new Set(deliveredOrders.flatMap(order => {
                // Parse comma-separated product names (e.g., "Classic Banana x2, Peanut Power x1")
                return order.productName.split(',').map(item => {
                    const match = item.trim().match(/^(.+?)\s+x\d+$/);
                    return match ? match[1].trim() : item.trim();
                });
            }))];
            
            // Match purchased product names to actual products
            const purchasedProductIds = products
                .filter(p => purchasedProducts.some(name => name.includes(p.name) || p.name.includes(name)))
                .map(p => p.id);
            
            if (purchasedProductIds.length === 0) {
                showToast('‚ö†Ô∏è No delivered products available for review!');
                return;
            }
            
            // Check which products have already been reviewed
            const reviewedProductIds = allData
                .filter(d => d.type === 'review' && d.userId === userId)
                .map(r => r.productId);
            
            const productSelect = document.getElementById('reviewProduct');
            if (productSelect) {
                const availableProducts = products.filter(p => 
                    purchasedProductIds.includes(p.id)
                );
                
                if (availableProducts.length === 0) {
                    showToast('‚ÑπÔ∏è You haven\'t received any orders yet!');
                    return;
                }
                
                productSelect.innerHTML = '<option value="">Select product you purchased</option>' +
                    availableProducts.map(p => {
                        const alreadyReviewed = reviewedProductIds.includes(p.id);
                        return `<option value="${p.id}" ${alreadyReviewed ? 'disabled' : ''}>${p.name}${alreadyReviewed ? ' (Already Reviewed ‚úì)' : ''}</option>`;
                    }).join('');
            }
            
            const modal = document.getElementById('reviewModal');
            const overlay = document.getElementById('overlay');
            if (modal) modal.classList.add('active');
            if (overlay) overlay.classList.add('active');
        }
        
        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            const overlay = document.getElementById('overlay');
            if (overlay) overlay.classList.remove('active');
        }
        
        // ESC Key Handler
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeCart();
                closeAllModals();
            }
        });
        
        // Form Validation
        function validatePhone(phone) {
            const phoneRegex = /^[6-9][0-9]{9}$/;
            return phoneRegex.test(phone);
        }
        
        function showError(fieldId, errorId, message) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            if (field) field.classList.add('error');
            if (error) {
                error.textContent = message;
                error.classList.add('show');
            }
        }
        
        function clearError(fieldId, errorId) {
            const field = document.getElementById(fieldId);
            const error = document.getElementById(errorId);
            if (field) field.classList.remove('error');
            if (error) error.classList.remove('show');
        }
        
        // Login Form
        const loginForm = document.getElementById('loginForm');
        if (loginForm) {
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const name = document.getElementById('loginName').value.trim();
                const phone = document.getElementById('loginPhone').value.trim();
                const email = document.getElementById('loginEmail').value.trim();
                
                let isValid = true;
                
                clearError('loginName', 'loginNameError');
                clearError('loginPhone', 'loginPhoneError');
                
                if (!name) {
                    showError('loginName', 'loginNameError', 'Please enter your name');
                    isValid = false;
                }
                
                if (!validatePhone(phone)) {
                    showError('loginPhone', 'loginPhoneError', 'Please enter valid mobile number');
                    isValid = false;
                }
                
                if (!isValid) return;
                
                currentUser = { name, phone, email };
                localStorage.setItem('frushh_user', JSON.stringify(currentUser));
                
                updateUserDisplay();
                closeAllModals();
                showToast(`Welcome, ${name}!`);
            });
        }
        
        // Checkout Form
        const checkoutForm = document.getElementById('checkoutForm');
        if (checkoutForm) {
            checkoutForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const name = document.getElementById('customerName').value.trim();
                const phone = document.getElementById('customerPhone').value.trim();
                const address = document.getElementById('customerAddress').value.trim();
                const time = document.getElementById('deliveryTime').value;
                const notes = document.getElementById('orderNotes').value.trim();
                
                let isValid = true;
                
                clearError('customerName', 'nameError');
                clearError('customerPhone', 'phoneError');
                clearError('customerAddress', 'addressError');
                clearError('deliveryTime', 'timeError');
                
                if (!name) {
                    showError('customerName', 'nameError', 'Please enter your name');
                    isValid = false;
                }
                
                if (!validatePhone(phone)) {
                    showError('customerPhone', 'phoneError', 'Please enter valid mobile number');
                    isValid = false;
                }
                
                if (!address) {
                    showError('customerAddress', 'addressError', 'Please enter delivery address');
                    isValid = false;
                }
                
                if (!time) {
                    showError('deliveryTime', 'timeError', 'Please select delivery time');
                    isValid = false;
                }
                
                if (!isValid) return;
                
                const submitBtn = document.getElementById('checkoutSubmitBtn');
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span class="loading-spinner"></span> Processing...';
                }
                
                const subtotal = calculateSubtotal();
                const discount = calculateDiscount(subtotal);
                const total = subtotal - discount;
                
                let message = `ü•§ *New FRUSHH Order*\n\n`;
                message += `üë§ *Customer:* ${name}\n`;
                message += `üì± *Phone:* ${phone}\n`;
                message += `üìç *Address:* ${address}\n`;
                message += `üïê *Time:* ${time}\n\n`;
                message += `*Order Details:*\n`;
                
                cart.forEach(item => {
                    message += `\n${item.name} x${item.quantity} - ‚Çπ${item.price * item.quantity}\n`;
                    if (item.customizations.extraDates) message += `  + Extra Dates (+‚Çπ10)\n`;
                    if (item.customizations.extraPB) message += `  + Extra Peanut Butter (+‚Çπ15)\n`;
                    if (item.customizations.lessIce) message += `  + Less Ice\n`;
                });
                
                message += `\nüí∞ *Subtotal:* ‚Çπ${subtotal}\n`;
                if (discount > 0) {
                    message += `üéüÔ∏è *Discount (${appliedCoupon.code}):* -‚Çπ${discount}\n`;
                }
                message += `üöö *Delivery:* FREE\n`;
                message += `üíµ *Total:* ‚Çπ${total}\n`;
                
                if (notes) {
                    message += `\nüìù *Notes:* ${notes}`;
                }
                
                const whatsappNumber = config.whatsapp_number || defaultConfig.whatsapp_number;
                const encodedMessage = encodeURIComponent(message);
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
                
                // Mark spin reward coupon as used if applicable
                if (appliedCoupon && appliedCoupon.spinReward) {
                    const spinCoupons = JSON.parse(localStorage.getItem('frushh_spin_coupons') || '[]');
                    const couponIndex = spinCoupons.findIndex(c => c.id === appliedCoupon.couponId);
                    if (couponIndex !== -1) {
                        spinCoupons[couponIndex].used = true;
                        spinCoupons[couponIndex].usedDate = new Date().toISOString();
                        localStorage.setItem('frushh_spin_coupons', JSON.stringify(spinCoupons));
                    }
                }
                
                // Mark free shake as used if applicable
                if (appliedCoupon && appliedCoupon.freeShake) {
                    const freeShakes = JSON.parse(localStorage.getItem('frushh_free_shakes') || '[]');
                    const shakeIndex = freeShakes.findIndex(s => s.id === appliedCoupon.shakeId);
                    if (shakeIndex !== -1) {
                        freeShakes[shakeIndex].used = true;
                        freeShakes[shakeIndex].usedDate = new Date().toISOString();
                        localStorage.setItem('frushh_free_shakes', JSON.stringify(freeShakes));
                    }
                }
                
                const userId = getUserId();
                const loyaltyPoints = Math.floor(total / 10);
                const orderId = generateId();
                
                // Create a single order with all items
                const itemsList = cart.map(item => `${item.name} x${item.quantity}`).join(', ');
                
                const orderData = {
                    id: orderId,
                    type: 'order',
                    userId: userId,
                    userName: name,
                    userPhone: phone,
                    userEmail: currentUser?.email || '',
                    productId: cart[0].id, // Store first product ID
                    productName: itemsList, // Store all items as comma-separated list
                    quantity: cart.reduce((sum, item) => sum + item.quantity, 0), // Total quantity
                    totalAmount: total,
                    address: address,
                    deliveryTime: time,
                    timestamp: new Date().toISOString(),
                    status: 'pending',
                    loyaltyPoints: loyaltyPoints,
                    tierLevel: getLoyaltyTier(calculateLoyaltyPoints() + loyaltyPoints).name
                };
                
                if (window.dataSdk) {
                    await window.dataSdk.create(orderData);
                }
                
                const link = document.createElement('a');
                link.href = whatsappUrl;
                link.target = '_blank';
                link.rel = 'noopener noreferrer';
                link.click();
                
                closeAllModals();
                cart = [];
                appliedCoupon = null;
                saveCartToStorage();
                updateCart();
                checkoutForm.reset();
                
                if (submitBtn) {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fab fa-whatsapp"></i> Place Order via WhatsApp';
                }
                
                showToast(`Order placed! Earned ${loyaltyPoints} points! üéâ`);
            });
        }
        
        // Review Form - Rating Stars
        document.querySelectorAll('.rating-star').forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                document.getElementById('reviewRating').value = rating;
                
                document.querySelectorAll('.rating-star').forEach((s, index) => {
                    if (index < rating) {
                        s.style.color = '#FFD700';
                    } else {
                        s.style.color = '#ddd';
                    }
                });
            });
        });
        
        // Review Form Submit
        const reviewForm = document.getElementById('reviewForm');
        if (reviewForm) {
            reviewForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const rating = document.getElementById('reviewRating').value;
                const productId = document.getElementById('reviewProduct').value;
                const reviewText = document.getElementById('reviewText').value.trim();
                
                let isValid = true;
                
                clearError('reviewProduct', 'reviewProductError');
                clearError('reviewText', 'reviewTextError');
                
                if (!rating) {
                    showError('reviewRating', 'ratingError', 'Please select rating');
                    isValid = false;
                }
                
                if (!productId) {
                    showError('reviewProduct', 'reviewProductError', 'Please select product');
                    isValid = false;
                }
                
                if (!reviewText) {
                    showError('reviewText', 'reviewTextError', 'Please write a review');
                    isValid = false;
                }
                
                if (!isValid) return;
                
                const submitBtn = document.getElementById('reviewSubmitBtn');
                if (submitBtn) {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<span class="loading-spinner"></span> Submitting...';
                }
                
                const product = products.find(p => p.id === parseInt(productId));
                const userId = getUserId();
                
                const reviewData = {
                    id: generateId(),
                    type: 'review',
                    userId: userId,
                    userName: currentUser?.name || 'Guest',
                    userPhone: currentUser?.phone || '',
                    userEmail: currentUser?.email || '',
                    productId: parseInt(productId),
                    productName: product.name,
                    rating: parseInt(rating),
                    review: reviewText,
                    timestamp: new Date().toISOString(),
                    loyaltyPoints: 5
                };
                
                if (window.dataSdk) {
                    const result = await window.dataSdk.create(reviewData);
                    if (result.isOk) {
                        closeAllModals();
                        reviewForm.reset();
                        document.querySelectorAll('.rating-star').forEach(s => s.style.color = '#ddd');
                        showToast('Review submitted! Earned 5 points! ‚≠ê');
                    } else {
                        showToast('Failed to submit review');
                    }
                }
                
                if (submitBtn) {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit Review';
                }
            });
        }
        
        // Toast
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            if (toast && toastMessage) {
                toastMessage.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
        }
        
        // GSAP Animations
        gsap.registerPlugin(ScrollTrigger);
        
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        
        if (!prefersReducedMotion) {
            gsap.from('.hero-badge', {
                scale: 0,
                duration: 0.6,
                ease: 'back.out'
            });
            
            gsap.from('.hero-logo', {
                scale: 0,
                rotation: 360,
                duration: 1,
                delay: 0.2,
                ease: 'back.out'
            });
            
            gsap.from('.hero h1', {
                y: 50,
                opacity: 0,
                duration: 0.8,
                delay: 0.5
            });
            
            gsap.from('.hero-tagline', {
                y: 30,
                opacity: 0,
                duration: 0.6,
                delay: 0.7
            });
            
            gsap.from('.hero-subtitle', {
                y: 30,
                opacity: 0,
                duration: 0.6,
                delay: 0.9
            });
            
            gsap.from('.hero-cta', {
                y: 30,
                opacity: 0,
                duration: 0.6,
                delay: 1.1
            });
            
            gsap.from('.stat-card', {
                y: 50,
                opacity: 0,
                stagger: 0.1,
                duration: 0.6,
                delay: 1.3
            });
        }
        
        // Spin Wheel Logic - Enhanced
        const spinRewards = [
            { id: 0, name: '10 Points', type: 'points', value: 10, angle: 0, icon: '‚≠ê', color: '#FFD700' },
            { id: 1, name: 'ÔøΩÔøΩÔøΩ20 OFF Coupon', type: 'coupon', value: 20, angle: 45, icon: 'üéüÔ∏è', color: '#FF6B6B' },
            { id: 2, name: '50 Points', type: 'points', value: 50, angle: 90, icon: 'üíé', color: '#4ECDC4' },
            { id: 3, name: 'Free Shake', type: 'free_shake', value: 1, angle: 135, icon: 'ü•§', color: '#95E1D3' },
            { id: 4, name: '25 Points', type: 'points', value: 25, angle: 180, icon: 'üåü', color: '#F38181' },
            { id: 5, name: '‚Çπ50 OFF Coupon', type: 'coupon', value: 50, angle: 225, icon: 'üé´', color: '#AA96DA' },
            { id: 6, name: '100 Points', type: 'points', value: 100, angle: 270, icon: 'üèÜ', color: '#FCBAD3' },
            { id: 7, name: 'Better Luck!', type: 'nothing', value: 0, angle: 315, icon: 'üçÄ', color: '#FFF59D' }
        ];
        
        let isSpinning = false;
        let lastSpinDate = localStorage.getItem('frushh_last_spin_date');
        let spinHistory = JSON.parse(localStorage.getItem('frushh_spin_history') || '[]');
        
        function canSpinToday() {
            if (!lastSpinDate) return true;
            
            const today = new Date().toDateString();
            const lastSpin = new Date(lastSpinDate).toDateString();
            
            return today !== lastSpin;
        }
        
        function getTimeUntilNextSpin() {
            if (!lastSpinDate) return null;
            
            const lastSpin = new Date(lastSpinDate);
            const tomorrow = new Date(lastSpin);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(0, 0, 0, 0);
            
            const now = new Date();
            const diff = tomorrow - now;
            
            if (diff <= 0) return null;
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            return { hours, minutes, seconds };
        }
        
        function updateCountdown() {
            const countdownEl = document.getElementById('spinCountdown');
            if (!countdownEl) return;
            
            if (canSpinToday()) {
                countdownEl.style.display = 'none';
                return;
            }
            
            const time = getTimeUntilNextSpin();
            if (!time) {
                countdownEl.style.display = 'none';
                updateSpinStatus();
                return;
            }
            
            countdownEl.style.display = 'block';
            countdownEl.innerHTML = `‚è∞ Next spin in: <strong>${String(time.hours).padStart(2, '0')}:${String(time.minutes).padStart(2, '0')}:${String(time.seconds).padStart(2, '0')}</strong>`;
        }
        
        function updateSpinHistory() {
            const historyContainer = document.getElementById('spinHistory');
            const historyList = document.getElementById('spinHistoryList');
            
            if (!historyContainer || !historyList) return;
            
            if (spinHistory.length === 0) {
                historyContainer.style.display = 'none';
                return;
            }
            
            historyContainer.style.display = 'block';
            
            historyList.innerHTML = spinHistory.slice(-5).reverse().map(item => {
                const date = new Date(item.timestamp);
                return `
                    <div class="spin-history-item">
                        <div class="spin-history-reward">
                            <span class="spin-history-icon">${item.icon}</span>
                            <div>
                                <div>${item.name}</div>
                                <div class="spin-history-date">${date.toLocaleDateString()} at ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                            </div>
                        </div>
                        <div style="font-weight: 800; font-size: 1.2rem; color: ${item.color};">
                            ${item.type === 'points' ? `+${item.value}` : item.type === 'coupon' ? `‚Çπ${item.value}` : 'üéÅ'}
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function updateActiveRewards() {
            const showcase = document.getElementById('activeRewardsShowcase');
            const rewardsList = document.getElementById('activeRewardsList');
            
            if (!showcase || !rewardsList) return;
            
            const spinCoupons = JSON.parse(localStorage.getItem('frushh_spin_coupons') || '[]').filter(c => !c.used);
            const freeShakes = JSON.parse(localStorage.getItem('frushh_free_shakes') || '[]').filter(s => !s.used);
            
            if (spinCoupons.length === 0 && freeShakes.length === 0) {
                showcase.style.display = 'none';
                return;
            }
            
            showcase.style.display = 'block';
            
            let rewardsHTML = '';
            
            // Display spin coupons
            spinCoupons.forEach(coupon => {
                const wonDate = new Date(coupon.wonDate);
                rewardsHTML += `
                    <div style="background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,165,0,0.15)); padding: 1.5rem; border-radius: 16px; border: 2px solid #FFD700; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(255,215,0,0.3); animation: pulse 2s infinite;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #FFD700, #FFA500); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 4px 12px rgba(255,215,0,0.4);">
                                üéüÔ∏è
                            </div>
                            <div>
                                <div style="font-weight: 800; font-size: 1.3rem; color: var(--primary); margin-bottom: 0.25rem;">‚Çπ${coupon.value} OFF Coupon</div>
                                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 0.5rem;">Won on ${wonDate.toLocaleDateString()}</div>
                                <div style="background: white; padding: 0.5rem 1rem; border-radius: 8px; font-family: 'Courier New', monospace; font-weight: 700; font-size: 1.1rem; color: #FFD700; border: 2px dashed #FFD700; display: inline-block;">${coupon.code}</div>
                            </div>
                        </div>
                        <button onclick="navigator.clipboard.writeText('${coupon.code}'); showToast('Coupon code copied! üìã');" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #FFD700, #FFA500); color: white; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; transition: var(--transition); box-shadow: 0 4px 12px rgba(255,215,0,0.3);">
                            <i class="fas fa-copy"></i> Copy Code
                        </button>
                    </div>
                `;
            });
            
            // Display free shakes
            freeShakes.forEach(shake => {
                const wonDate = new Date(shake.wonDate);
                rewardsHTML += `
                    <div style="background: linear-gradient(135deg, rgba(78,205,196,0.15), rgba(149,225,211,0.15)); padding: 1.5rem; border-radius: 16px; border: 2px solid #4ECDC4; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 12px rgba(78,205,196,0.3); animation: pulse 2s infinite;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #4ECDC4, #95E1D3); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; box-shadow: 0 4px 12px rgba(78,205,196,0.4);">
                                ü•§
                            </div>
                            <div>
                                <div style="font-weight: 800; font-size: 1.3rem; color: var(--primary); margin-bottom: 0.25rem;">FREE SHAKE Voucher</div>
                                <div style="font-size: 0.9rem; color: var(--text-light); margin-bottom: 0.5rem;">Won on ${wonDate.toLocaleDateString()}</div>
                                <div style="background: white; padding: 0.5rem 1rem; border-radius: 8px; font-family: 'Courier New', monospace; font-weight: 700; font-size: 1.1rem; color: #4ECDC4; border: 2px dashed #4ECDC4; display: inline-block;">${shake.code}</div>
                            </div>
                        </div>
                        <button onclick="navigator.clipboard.writeText('${shake.code}'); showToast('Voucher code copied! üìã');" style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #4ECDC4, #95E1D3); color: white; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; transition: var(--transition); box-shadow: 0 4px 12px rgba(78,205,196,0.3);">
                            <i class="fas fa-copy"></i> Copy Code
                        </button>
                    </div>
                `;
            });
            
            rewardsList.innerHTML = rewardsHTML;
        }
        
        function updateSpinStatus() {
            const statusEl = document.getElementById('spinStatus');
            const lastSpinEl = document.getElementById('lastSpinTime');
            const spinBtn = document.getElementById('spinButton');
            
            if (canSpinToday()) {
                if (statusEl) {
                    statusEl.textContent = '‚ú® Ready to spin! Click the SPIN button!';
                    statusEl.style.color = 'var(--success)';
                }
                if (spinBtn) {
                    spinBtn.classList.remove('disabled');
                }
            } else {
                if (statusEl) {
                    statusEl.textContent = '‚è≥ Come back tomorrow for another chance!';
                    statusEl.style.color = 'var(--error)';
                }
                if (spinBtn) {
                    spinBtn.classList.add('disabled');
                }
            }
            
            if (lastSpinDate && lastSpinEl) {
                const lastSpinTime = new Date(lastSpinDate);
                lastSpinEl.textContent = `Last spin: ${lastSpinTime.toLocaleDateString()} at ${lastSpinTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}`;
            }
            
            updateCountdown();
            updateSpinHistory();
            updateActiveRewards();
        }
        
        function createConfetti() {
            const colors = ['#FFD700', '#FF6B6B', '#4ECDC4', '#95E1D3', '#F38181', '#AA96DA', '#FCBAD3'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }
        
        async function spinWheel() {
            if (isSpinning) return;
            if (!canSpinToday()) {
                showToast('‚è∞ You can only spin once per day! Come back tomorrow!');
                return;
            }
            
            isSpinning = true;
            const spinBtn = document.getElementById('spinButton');
            const wheel = document.getElementById('spinWheel');
            const statusEl = document.getElementById('spinStatus');
            
            if (spinBtn) {
                spinBtn.classList.add('disabled');
                spinBtn.style.pointerEvents = 'none';
            }
            if (statusEl) {
                statusEl.textContent = 'üé∞ Spinning... Good luck!';
                statusEl.style.color = 'var(--info)';
            }
            
            // Random reward selection with weighted probabilities
            const random = Math.random() * 100;
            let selectedReward;
            
            if (random < 5) { // 5% chance
                selectedReward = spinRewards[6]; // 100 Points
            } else if (random < 10) { // 5% chance
                selectedReward = spinRewards[3]; // Free Shake
            } else if (random < 20) { // 10% chance
                selectedReward = spinRewards[5]; // ‚Çπ50 OFF
            } else if (random < 35) { // 15% chance
                selectedReward = spinRewards[2]; // 50 Points
            } else if (random < 55) { // 20% chance
                selectedReward = spinRewards[1]; // ‚Çπ20 OFF
            } else if (random < 75) { // 20% chance
                selectedReward = spinRewards[4]; // 25 Points
            } else if (random < 90) { // 15% chance
                selectedReward = spinRewards[0]; // 10 Points
            } else { // 10% chance
                selectedReward = spinRewards[7]; // Better Luck
            }
            
            // Calculate spin rotation
            const extraSpins = 5 + Math.floor(Math.random() * 3); // 5-7 full rotations
            const baseRotation = 360 * extraSpins;
            const targetAngle = 360 - selectedReward.angle + 22.5;
            const totalRotation = baseRotation + targetAngle;
            
            // Reset and animate
            if (wheel) {
                wheel.style.transition = 'none';
                wheel.style.transform = 'rotate(0deg)';
                
                setTimeout(() => {
                    wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)';
                    wheel.style.transform = `rotate(${totalRotation}deg)`;
                }, 50);
            }
            
            // Wait for animation
            setTimeout(async () => {
                // Save spin data
                lastSpinDate = new Date().toISOString();
                localStorage.setItem('frushh_last_spin_date', lastSpinDate);
                
                // Award prize
                const userId = getUserId();
                let rewardMessage = '';
                let shouldCreateConfetti = false;
                
                if (selectedReward.type === 'points') {
                    // Award loyalty points
                    const spinData = {
                        id: generateId(),
                        type: 'spin_reward',
                        userId: userId,
                        userName: currentUser?.name || 'Guest',
                        productName: selectedReward.name,
                        loyaltyPoints: selectedReward.value,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(spinData);
                    }
                    
                    rewardMessage = `üéâ Congratulations! You won ${selectedReward.value} loyalty points!`;
                    shouldCreateConfetti = selectedReward.value >= 50;
                    
                } else if (selectedReward.type === 'coupon') {
                    // Generate unique coupon code
                    const couponCode = `SPIN${selectedReward.value}-${Date.now().toString().slice(-4)}`;
                    
                    // Save coupon to localStorage
                    const spinCoupons = JSON.parse(localStorage.getItem('frushh_spin_coupons') || '[]');
                    spinCoupons.push({
                        id: generateId(),
                        code: couponCode,
                        value: selectedReward.value,
                        used: false,
                        wonDate: new Date().toISOString()
                    });
                    localStorage.setItem('frushh_spin_coupons', JSON.stringify(spinCoupons));
                    
                    // Also save to data SDK for tracking
                    const spinData = {
                        id: generateId(),
                        type: 'spin_reward',
                        userId: userId,
                        userName: currentUser?.name || 'Guest',
                        productName: `‚Çπ${selectedReward.value} OFF Coupon`,
                        loyaltyPoints: 0,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(spinData);
                    }
                    
                    rewardMessage = `üéüÔ∏è Amazing! You won a ‚Çπ${selectedReward.value} OFF coupon!\n\nüíé Your Coupon Code: ${couponCode}\n\nUse it on your next order!`;
                    shouldCreateConfetti = true;
                    
                    // Show coupon in a special toast
                    setTimeout(() => {
                        showToast(`Your coupon: ${couponCode} - Click to copy!`);
                    }, 3500);
                    
                } else if (selectedReward.type === 'free_shake') {
                    // Generate unique free shake code
                    const shakeCode = `FREESHAKE-${Date.now().toString().slice(-4)}`;
                    
                    // Save free shake voucher
                    const freeShakes = JSON.parse(localStorage.getItem('frushh_free_shakes') || '[]');
                    freeShakes.push({
                        id: generateId(),
                        code: shakeCode,
                        used: false,
                        wonDate: new Date().toISOString()
                    });
                    localStorage.setItem('frushh_free_shakes', JSON.stringify(freeShakes));
                    
                    // Also save to data SDK
                    const spinData = {
                        id: generateId(),
                        type: 'spin_reward',
                        userId: userId,
                        userName: currentUser?.name || 'Guest',
                        productName: 'Free Shake Voucher',
                        loyaltyPoints: 0,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(spinData);
                    }
                    
                    rewardMessage = `ü•§üéä JACKPOT! You won a FREE SHAKE!\n\nüíé Your Voucher Code: ${shakeCode}\n\nRedeem on any shake!`;
                    shouldCreateConfetti = true;
                    
                    // Show voucher code
                    setTimeout(() => {
                        showToast(`Your free shake code: ${shakeCode} - Click to copy!`);
                    }, 3500);
                    
                } else {
                    // Better luck next time
                    rewardMessage = `üçÄ Better luck next time! Come back tomorrow for another try!\n\nDon't worry, you still get 5 loyalty points for trying! üí™`;
                    
                    // Give consolation points
                    const spinData = {
                        id: generateId(),
                        type: 'spin_reward',
                        userId: userId,
                        userName: currentUser?.name || 'Guest',
                        productName: 'Consolation Prize',
                        loyaltyPoints: 5,
                        timestamp: new Date().toISOString()
                    };
                    
                    if (window.dataSdk) {
                        await window.dataSdk.create(spinData);
                    }
                }
                
                // Add to history
                spinHistory.push({
                    ...selectedReward,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('frushh_spin_history', JSON.stringify(spinHistory));
                
                // Show results
                if (shouldCreateConfetti) {
                    createConfetti();
                }
                
                showToast(rewardMessage);
                
                if (statusEl) {
                    statusEl.innerHTML = `<strong style="font-size: 1.3rem;">${selectedReward.icon} ${selectedReward.name}</strong>`;
                    statusEl.style.color = selectedReward.type === 'nothing' ? 'var(--error)' : 'var(--success)';
                }
                
                updateSpinStatus();
                updateCart(); // Refresh cart to show new coupons
                isSpinning = false;
                
                if (spinBtn) {
                    spinBtn.style.pointerEvents = 'auto';
                }
            }, 5000);
        }
        
        // Spin button event listener
        const spinButton = document.getElementById('spinButton');
        if (spinButton) {
            spinButton.addEventListener('click', spinWheel);
        }
        
        // Update countdown every second
        setInterval(updateCountdown, 1000);
        
        // Check order status every 5 seconds (TESTING MODE)
        setInterval(() => {
            const currentSection = document.querySelector('.section-container.active');
            if (currentSection && currentSection.id === 'ordersSection') {
                updateOrdersDisplay();
            }
        }, 5000);
        
        // Initialize
        renderProducts();
        loadCartFromStorage();
        loadUserFromStorage();
        updateCart();
        updateSpinStatus();
        initializeDataSDK();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a0ff064735a8ef1',t:'MTc2MzU1NzczNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
